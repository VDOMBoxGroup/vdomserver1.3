<?xml version="1.0" encoding="utf-8"?>
<Type>
  <Information>
    <Name>uploader_2</Name>
    <DisplayName>#Lang(001)</DisplayName>
    <Description>#Lang(002)</Description>
    <ClassName>VDOM_uploader_2</ClassName>
    <ID>aff988ba-4efa-e9d2-b354-04431dce1092</ID>
    <Icon>#Res(d3b7faa2-c2a1-5433-c92e-16f5bde8b918)</Icon>
    <EditorIcon>#Res(e1a89747-a860-32ae-4819-16f5e721b6ea)</EditorIcon>
    <StructureIcon>#Res(e120cfa3-382b-dec8-dd33-16f6162944fa)</StructureIcon>
    <Moveable>1</Moveable>
    <Resizable>3</Resizable>
    <Container>1</Container>
    <Category>Additional</Category>
    <Dynamic>0</Dynamic>
    <Version>2.23.8400</Version>
    <InterfaceType>1</InterfaceType>
    <OptimizationPriority>1</OptimizationPriority>
    <Containers>htmlcontainer,dialog,dialog_2,container,tablecell,vdomclass, accordeon</Containers>
    <Languages>en_US ,ru_RU ,fr_FR</Languages>
    <Handlers/>
    <RemoteMethods/>
    <WCAG/>
    <XMLScriptName/>
  </Information>
  <Attributes>
    <Attribute>
      <Name>hierarchy</Name>
      <DisplayName>#Lang(101)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(201)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(301)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>visible</Name>
      <DisplayName>#Lang(102)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(202)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(401)|0)|(#Lang(402)|1))</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(302)</ErrorValidationMessage>
      <RegularExpressionValidation>^[01]$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>zindex</Name>
      <DisplayName>#Lang(103)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(203)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(303)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>top</Name>
      <DisplayName>#Lang(104)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(204)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(304)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>left</Name>
      <DisplayName>#Lang(105)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(205)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(305)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>width</Name>
      <DisplayName>#Lang(106)</DisplayName>
      <DefaultValue>150</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(206)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(306)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>height</Name>
      <DisplayName>#Lang(107)</DisplayName>
      <DefaultValue>32</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(207)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(307)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>pageurl</Name>
      <DisplayName>#Lang(108)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(208)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>ObjectList(6cd1ad90-ca33-4a08-a3d0-ed60309db88b)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(308)</ErrorValidationMessage>
      <RegularExpressionValidation>.*</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>formdata</Name>
      <DisplayName>#Lang(109)</DisplayName>
      <DefaultValue/>
      <Visible>0</Visible>
      <Help>#Lang(209)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>MultiLine(50000)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(309)</ErrorValidationMessage>
      <RegularExpressionValidation>.*</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>classname</Name>
      <DisplayName>#Lang(111)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(211)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(50)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(311)</ErrorValidationMessage>
      <RegularExpressionValidation>^.*$</RegularExpressionValidation>
    </Attribute>
  </Attributes>
  <Languages>
    <Language Code="en_US">
      <Sentence ID="001">Uploader v2</Sentence>
      <Sentence ID="002">The Uploader v2 type produces an object that allows user to choose one or more files from file local computer to upload them. The files for uploading can be dragged and dropped onto the Uploader v2 object. It allows interrupting the process of uploading files.</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101">Hierarchy</Sentence>
      <Sentence ID="102">Visibility</Sentence>
      <Sentence ID="103">Z-Index</Sentence>
      <Sentence ID="104">Top</Sentence>
      <Sentence ID="105">Left</Sentence>
      <Sentence ID="106">Width</Sentence>
      <Sentence ID="107">Height</Sentence>
      <Sentence ID="108">URL</Sentence>
      <Sentence ID="109">Data</Sentence>
      <Sentence ID="111">CSS Class</Sentence>
      <Sentence ID="201">Order of rendering the object on the page</Sentence>
      <Sentence ID="202">Visibility of the object</Sentence>
      <Sentence ID="203">Position in visual hierarchy of objects</Sentence>
      <Sentence ID="204">Spacing between the top edge of the container and the object in pixels</Sentence>
      <Sentence ID="205">Spacing between the left edge of the container and the object in pixels</Sentence>
      <Sentence ID="206">Width of the object in pixels</Sentence>
      <Sentence ID="207">Height of the object in pixels</Sentence>
      <Sentence ID="208">onload on this page must be catch the uploaded data</Sentence>
      <Sentence ID="209">Additional data (JSON) to send with files</Sentence>
      <Sentence ID="211">Names of CSS classes</Sentence>
      <Sentence ID="301">Incorrect value, must be even integer from 0 to 99</Sentence>
      <Sentence ID="302">Incorrect value, must be either 0 or 1</Sentence>
      <Sentence ID="303">Incorrect value, must be even integer from 0 to 99</Sentence>
      <Sentence ID="304">Incorrect value, must be even positive integer</Sentence>
      <Sentence ID="305">Incorrect value, must be even positive integer</Sentence>
      <Sentence ID="306">Incorrect value, must be even positive integer</Sentence>
      <Sentence ID="307">Incorrect value, must be even positive integer</Sentence>
      <Sentence ID="308">Invalid value</Sentence>
      <Sentence ID="309">Invalid value, must be JSON</Sentence>
      <Sentence ID="311">Incorrect value</Sentence>
      <Sentence ID="401">Invisible</Sentence>
      <Sentence ID="402">Visible</Sentence>
      <Sentence ID="501">Hide the object</Sentence>
      <Sentence ID="502">Move the object to a new position</Sentence>
      <Sentence ID="503">Set new CSS style of the object</Sentence>
      <Sentence ID="504">Show the object</Sentence>
      <Sentence ID="505">Start upload</Sentence>
      <Sentence ID="506">Start upload</Sentence>
      <Sentence ID="507"></Sentence>
      <Sentence ID="508"></Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="601">Hide</Sentence>
      <Sentence ID="602">moveTo</Sentence>
      <Sentence ID="603">setStyle</Sentence>
      <Sentence ID="604">Show</Sentence>
      <Sentence ID="605">Start upload</Sentence>
      <Sentence ID="606">Start upload</Sentence>
      <Sentence ID="701">Fade</Sentence>
      <Sentence ID="702">newX</Sentence>
      <Sentence ID="703">newY</Sentence>
      <Sentence ID="704">Effect</Sentence>
      <Sentence ID="705">cssStyleValue</Sentence>
      <Sentence ID="706">Fade</Sentence>
      <Sentence ID="801">Fade effect, time is indicated in milliseconds</Sentence>
      <Sentence ID="802">X-coordinate of the new position relative to the left upper corner of the container</Sentence>
      <Sentence ID="803">Y-coordinate of the new position relative to the left upper corner of the container</Sentence>
      <Sentence ID="804">Visual effect of moving, time is indicated in milliseconds</Sentence>
      <Sentence ID="805">CSS style value</Sentence>
      <Sentence ID="806">Fade effect, time is indicated in milliseconds</Sentence>
      <Sentence ID="901">percent</Sentence>
      <Sentence ID="902">percent</Sentence>
      <Sentence ID="903">percent</Sentence>
      <Sentence ID="904">percent</Sentence>
    </Language>
    <Language Code="ru_RU">
      <Sentence ID="001">Загрузчик</Sentence>
      <Sentence ID="002">Загрузчик файлов</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101">Иерархия</Sentence>
      <Sentence ID="102">Отображение</Sentence>
      <Sentence ID="103">Позиция</Sentence>
      <Sentence ID="104">Сверху</Sentence>
      <Sentence ID="105">Слева</Sentence>
      <Sentence ID="106">Ширина</Sentence>
      <Sentence ID="107">Высота</Sentence>
      <Sentence ID="108"></Sentence>
      <Sentence ID="109"></Sentence>
      <Sentence ID="111">Класс CSS</Sentence>
      <Sentence ID="201">Порядок визуализации объекта в ходе загрузки страницы</Sentence>
      <Sentence ID="202">Режим отображения объекта</Sentence>
      <Sentence ID="203">Положение в визуальной иерархии объектов</Sentence>
      <Sentence ID="204">Расстояние от верхней границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="205">Расстояние от левой границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="206">Ширина объекта в пикселях</Sentence>
      <Sentence ID="207">Высота объекта в пикселях</Sentence>
      <Sentence ID="208"></Sentence>
      <Sentence ID="209"></Sentence>
      <Sentence ID="211">Имя класса CSS</Sentence>
      <Sentence ID="301">Неправильное значение, должно быть указано целое число от 0 до 99</Sentence>
      <Sentence ID="302">Неправильное значение, должен быть указан 0 или 1</Sentence>
      <Sentence ID="303">Неправильное значение, должно быть указано целое число от 0 до 99</Sentence>
      <Sentence ID="304">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="305">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="306">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="307">Неправильное значение, должно быть указано целое положительное число</Sentence>
      <Sentence ID="308"></Sentence>
      <Sentence ID="309"></Sentence>
      <Sentence ID="311">Неправильное значение</Sentence>
      <Sentence ID="401">Не отображать</Sentence>
      <Sentence ID="402">Отображать</Sentence>
      <Sentence ID="501">Скрыть объект</Sentence>
      <Sentence ID="502">Сдвинуть объект в заданную точку</Sentence>
      <Sentence ID="503">Установить новый стиль CSS</Sentence>
      <Sentence ID="504">Показать объект</Sentence>
      <Sentence ID="505"></Sentence>
      <Sentence ID="506"></Sentence>
      <Sentence ID="507"></Sentence>
      <Sentence ID="508"></Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="601">Скрыть</Sentence>
      <Sentence ID="602">Сдвинуть</Sentence>
      <Sentence ID="603">Установить стиль</Sentence>
      <Sentence ID="604">Показать</Sentence>
      <Sentence ID="605"></Sentence>
      <Sentence ID="606"></Sentence>
      <Sentence ID="701">Исчезновение</Sentence>
      <Sentence ID="702">Координата новой точки по оси X</Sentence>
      <Sentence ID="703">Координата новой точки по оси Y</Sentence>
      <Sentence ID="704">Эффект</Sentence>
      <Sentence ID="705">Установить стиль CSS</Sentence>
      <Sentence ID="706">Появление</Sentence>
      <Sentence ID="801">Время исчезновения в миллисекундах</Sentence>
      <Sentence ID="802">Координата новой точки по оси X</Sentence>
      <Sentence ID="803">Координата новой точки по оси Y</Sentence>
      <Sentence ID="804">Визуальный эффект при перетаскивании</Sentence>
      <Sentence ID="805">Новое значение стиля CSS</Sentence>
      <Sentence ID="806">Время появления в миллисекундах</Sentence>
      <Sentence ID="901"></Sentence>
      <Sentence ID="902"></Sentence>
      <Sentence ID="903"></Sentence>
      <Sentence ID="904"></Sentence>
    </Language>
    <Language Code="fr_FR">
      <Sentence ID="001">Envoi de fichier</Sentence>
      <Sentence ID="002">Champs de formulaire permettant l'envpoi de fichier</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101">Hiérarchie</Sentence>
      <Sentence ID="102">Visibilité</Sentence>
      <Sentence ID="103">Z-Index</Sentence>
      <Sentence ID="104">Haut</Sentence>
      <Sentence ID="105">Gauche</Sentence>
      <Sentence ID="106">Largeur</Sentence>
      <Sentence ID="107">Hauteur</Sentence>
      <Sentence ID="108"></Sentence>
      <Sentence ID="109"></Sentence>
      <Sentence ID="111">CSS Class</Sentence>
      <Sentence ID="201">Hiérarchie de l'objet, ordre de chargement de l'objet par rapport aux autres</Sentence>
      <Sentence ID="202">Afficher ou cacher l'objet</Sentence>
      <Sentence ID="203">Niveau de superposition de l'objet par rapport aux autres</Sentence>
      <Sentence ID="204">Distance depuis le bord haut de l'objet parent en pixels</Sentence>
      <Sentence ID="205">Distance depuis le bord gauche de l'objet parent en pixels</Sentence>
      <Sentence ID="206">Largeur de l'objet en pixels</Sentence>
      <Sentence ID="207">Hauteur de l'objet en pixels</Sentence>
      <Sentence ID="208"></Sentence>
      <Sentence ID="209"></Sentence>
      <Sentence ID="211">CSS class name</Sentence>
      <Sentence ID="301">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="302">Valeur Incorrecte, doit être 0 ou 1</Sentence>
      <Sentence ID="303">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="304">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="305">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="306">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="307">Valeur Incorrecte, doit être positive</Sentence>
      <Sentence ID="308"></Sentence>
      <Sentence ID="309"></Sentence>
      <Sentence ID="311">Incorrect value</Sentence>
      <Sentence ID="401">Invisible</Sentence>
      <Sentence ID="402">Visible</Sentence>
      <Sentence ID="501">Hide the object</Sentence>
      <Sentence ID="502">Move object to selected point</Sentence>
      <Sentence ID="503">Set new CSS style</Sentence>
      <Sentence ID="504">Show the object</Sentence>
      <Sentence ID="505"></Sentence>
      <Sentence ID="506"></Sentence>
      <Sentence ID="507"></Sentence>
      <Sentence ID="508"></Sentence>
      <Sentence ID="509"></Sentence>
      <Sentence ID="511"></Sentence>
      <Sentence ID="512"></Sentence>
      <Sentence ID="601">Hide</Sentence>
      <Sentence ID="602">moveTo</Sentence>
      <Sentence ID="603">setStyle</Sentence>
      <Sentence ID="604">Show</Sentence>
      <Sentence ID="605"></Sentence>
      <Sentence ID="606"></Sentence>
      <Sentence ID="701">Fade</Sentence>
      <Sentence ID="702">newX</Sentence>
      <Sentence ID="703">newY</Sentence>
      <Sentence ID="704">Effect</Sentence>
      <Sentence ID="705">cssStyleValue</Sentence>
      <Sentence ID="706">Fade</Sentence>
      <Sentence ID="801">Fade time</Sentence>
      <Sentence ID="802">X-coordinate of new point</Sentence>
      <Sentence ID="803">Y-coordinate of new point</Sentence>
      <Sentence ID="804">Visual effect by moving</Sentence>
      <Sentence ID="805">New CSS style value</Sentence>
      <Sentence ID="806">Time of appearance</Sentence>
      <Sentence ID="901"></Sentence>
      <Sentence ID="902"></Sentence>
      <Sentence ID="903"></Sentence>
      <Sentence ID="904"></Sentence>
    </Language>
  </Languages>
  <Resources>
    <Resource ID="d3b7faa2-c2a1-5433-c92e-16f5bde8b918" Name="Icon" Type="png"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
SUQ9InhtcC5paWQ6QjdBRTY3NjFFQzE5MTFFMTg5NDY4NjgzOEIzNkZFNjMiIHhtcE1NOkRvY3Vt
ZW50SUQ9InhtcC5kaWQ6QjdBRTY3NjJFQzE5MTFFMTg5NDY4NjgzOEIzNkZFNjMiPiA8eG1wTU06
RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCN0FFNjc1RkVDMTkxMUUxODk0
Njg2ODM4QjM2RkU2MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCN0FFNjc2MEVDMTkxMUUx
ODk0Njg2ODM4QjM2RkU2MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
bWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtIsm/IAAAv3SURBVHja3FpLbB1XGf7PPO7MvXbq2I7t
CJUKkBCqAKmgqghBnISWkjQotiNg0U2lsmMBqBUsqiCxSB02KRvUTRHLViAlbSHEaStC0pCiCgTZ
gIAGmjR+24mf9zlz5vD//znzvHb8arLoTX7NzL1zzz3f+b7/dcZCKQUfhZez0wHOvfJ9XgnXLYEQ
AkBYfBR0tCw+pu/ZjQjvjSRAEEZ+vRHC0kodFhercHupCisrDWg2W2eeevp7L//ypV+ctug7th4j
Hg+U0OPqsfFgWz9/4VfS2vFSKJwasqqiCCKcobqD4ee+ktLHC18A4Y/AEgoYP10rGUgpH7z//gde
OvmzFz4byBCCIIQwlBBKNDqXdB2g0WeBQuCSprFjICRNpQwIc2RTMjlXmSMBV0rfa1kKHEdAybXA
c208t8G2RV+zsdq9sDB59sTzo5/H0fleWigVLxq5gzLXIFNpffGhT9NBZOYnMtfiTkB++syj6Zci
khFST/+siKSER4Wrjj+I56SMiD7je/DHbQEuSscr2VAic4VVt4XbbNRgdWXqE0Fr9ezo86NDhw8d
u0rjP/zI52jp+LsMBseJfdwpTFYYlrImCsByr6AV8EfSkhoEmYWTZn1LBoMy1mBoOOHgjwuWE62u
beMkHAtBEBjHwv9ehHObnZ0Bb3n2AXSD82PnXz18+NDI32nSJEE9dX0ev6wCC3Rtk++ieWhltA60
TrRdaPcVrd5oQaPZgnojADqnY6PRxPcCdFzUcoCGYCOUBmk9ktJIRPsHYgQX5eV7DplAMG65UsH7
FYzfnIAPrl8bWFyYfGPsjdce1vKSiby0tFQbEMswRCB8A4Am34XWbaynaLVaE6poq7U60Hmt1oBa
VR8bdQSE4MhhWwhKStJ6aPSuV5SAxH5CYMqeY1XKZeju3o0TUjA5QWD+04dgzo6OnnxEEV2GDRX7
S0FaMRueAUIsVMy1a+5tCw7L1YbWndDqs9ARyGycoYvOW/Jcjji+R36ieBiHFKZwmspivyFfcVxi
xYVyuSRs24Genl5Y7d8Dc3O3YXJ8kqQ6gLe+fuLEyW8d/8lzVwRFO8tOFM9Azo29KLMKQ5RNMzNz
rV04zp20KER9EEio14mBBtxaWIJb84swN78AC0srEFSX4DOfHICl+evg+yVeOV/pMWhk8g3tJkI7
veug00tihMd3Sx707unn35+fvw1Tk9OUj/Z+7OPq9IkTo98+fvy5y4IilwFiVljlDH/IQyuRWWi2
JVxcOWMiMXRSt1Qq4WrSJFyejOM4PNFWaMHXjjwFpXIP1Ootlliz2dS5IIzYZxRolkgmHkvLRdAu
TN58D5myodzRCXv6BqCvr5cDwuz0DEx88L+B+bmbv3v22R8f0vlLZoFEGSDmPInZ5gc1QL4WHERj
0BH/iFtCMLjytPolBGVjFBLomAcOH8MJ7QYdFAJoofMHFADI8U0+wEXhKOcgmLLvwL//+S77mGP7
4Jc7oBfB7OnrYcnOzc/C/NxEly0aYz/44TNPnjr1op8CMQOmgArHDCARZ2JB+QElQjThpImRsu9p
ILiyruNCs1HFIeqw/xtHoNLZm4AJDJgILV4YG8dzbR29gsYC/OPqFZhGBlooX8t2obNzN3T37IaK
56vVpcVoeuqmrNcWTl24cG4k4+yRdhoVy0wYx4xThzlnQKATEWgwpHWUngZDUccneXjgIhgMUjiZ
aejYZcPBJ47ApbEx9KdbvPqx/5GGI/IXwVldx5uyQBmuwLV//RUlGUKzhVGvheEbB8QaTQWhDMJQ
YTCUFSnV00PD333F0dNU7dkuzjU5QDo66dBJ9ZtKwLgoLw8nX6n40IFWr+Gxs8IrPn5jEmRIMnsC
3n7zPFRX5jOBBcNiCdnFMSwqMA0oAktRz0O/w8mjz1EeUshQZCEAD5kqITjRaoWPZRhRoAqZcT1A
cdzmDE4RiPRtx/Jy2GErFY8BVTCx9fTuhqWFKZjA5EbyHXz8cbj81luwujxraibF0R3LE7AcAmNT
NcPObptoFkqF7Co8AoMJJAEKRb1J+UlCDkhx7u0MCePcWTAaH2doSmolLa+ODh8lUeYisKcXo9Zq
L8xMz8PE+ASP+5VHH4N3LlyA5YVpzUikJVui8R3dAlAecpBqye8LBhLhHFBKDIgY8n2JfpgFEvuG
iPlIGVpLcjp6xU6vWSGnd5AVv+yhnkMGw5PDfNDX388Sm53B5DYxxUL+0v4D8OdLF2Hp9iRHLxqP
8oeH5rgu9xtUnxEYmoXLNRoX/syQRywhhqYfrcGIWXUQqZMbbzDhVuTTjgAOnSw5k6EpD4QhggnK
MDMzBV1dCK7SAf0De7kqnsekOT01zQn1ywcOwjsXL8Li/DiueGSSpR6YmLeQHSpTdBMF3KDpBGrz
jGSEAMMI1uhHYkAqIzeVMKTySTNpqGKH53xCDupRuPRhYvK/mAwxtNoeg+kbwOTW34MyxHwwNwcr
y3Pw9SPfhL69n8IoJfFeqs0Crs2kDJP+hRaRepe4LqN8Q9Wy79lU0qzX6qp8KM7ILef7kCHOOD/r
2lHs8FTcrVbr8P7716Gnuwt2daJUHB+6untQQhaG4ToCWcYBb8CDD30B3v1TFWrL08wwhXNydBqP
6ilbdzGaLQRjKWWaDPQlJe7Us2emq2DNnBKLLnZ+ozBmhYaNA0IV67CpqSm4hkcqVepY4rc4L4Rc
sjSb1/mcdH8fBMiWg6w6HCh0xyhRQhY3aBwlWX9a6iQ7pinvIwK2zk4+ktFq0u9wBFO65qKyooSR
zPNKUOF6Syc47LVNz6LrsHody5cFlFUL80aAITd0UF66f7FJt8gitcs0eYsSJ1cidtJcORsE3fz7
d5KbiWQkCYFOiGUlgnAZCEUzF0uYSktqJlp6U6GBoKgJoz6mjjY+G1J+0HUYb2YoHdHo3JKsJnJ2
+kwvmtRi2Xg7SOUmvBGgpEOzLMOU0kCciOUSYpnuY5QJAsrUWLK3CAgmznILauUG3MDPqPkKjSW7
MhQSqX8R1JhRJNNlqy51rLWArJvf230nA+jolUH47VcvZ6J2pDM+MWOyNDdQWFRFWI6UQp0HiBXf
kxBUEFTZ16V93MZGMrkmvWpZ6ZwVS4DUFQkBG2wHqTtsoKTh+ejlQa45j769L5cxLfYPXVCSDCgI
xOG55JlSBpPnLqzHOndVMN/sYhlF8bYPQGa/LDJFeGS2gZRhKir2I9t7DV0aBN7pMTZ0cR9ka7c4
8yegbNMC6x0T9htKoASIKgFQaQrjSapMNjMAIrMBwX2/sU0AUW36T0Bc2K/3xgo29Id9uSSaFJgG
GLFD/yjyEEMErISFYbnspYugUkQqkVu6SRfF13webYWRfCs89NbaIBIwbw5mmEkrgbgpI3YsA8pm
ydlc5XInqsy3FCSAVNEK4LYlreHzB0DQXtwGNjy2rwAGdHZOVh0yLIFuqhTkQrpKdZayFG+XRjLd
Rt0qkOHfH8QVF5u24bODGU6zdZrItMxpHIwFmZ10shGXk5faPiPDryOIELZsw68NFqQJ+WM2J6lM
jloTUOobuY3tzQIZOXNwU3Jaz0ZOD+br6EwvAyKtpHMQY2dXscyihC1VALYpICO/2R4TRRv59b58
SRNvZBQDSoa4HCjuqmJnVzlWNvXE6tXv/DF3fezlg5v2qTNPXixs9LcXnNTMqbbqOpVYErnMLo72
KaVrRitFvfVHb+FOngpli4VMHacK5VEim8y9dC0gfy+xYW3zGaLYCZA1wbQXnqogtziniOTpiMp8
bZuMiEDsYOaqvW9r2yfIf1VF8aMD08wl9ytTFUf3Slpi/R40s7OZPiZXSXYvPKzM9T46YqcLcA+l
lTKj2j5Ra5Z0KpNvVLEqEMIAvmeM5NuBoiekDi3g0l+mf4QnM2gTaLNot9FW0Or0y3+7+t6H9wcD
Qu7Mz7N7aKrwmPve/uVDuBMQRX/PsiLuMRApPkQQ6eM8w4gsPHW6e0C2Ki3VFqYyGT3jvObVpEf3
hvcsqLvByE50tca+v9kpNIyQUzcyYDbNzl0FotZLiirO0CIpIM3nFKGqBkzMyt1hRETbZ2O9zzK3
LGbCbSvDysbz+qj84dn/BRgAQ87h/YoJjhIAAAAASUVORK5CYII=]]></Resource>
    <Resource ID="e1a89747-a860-32ae-4819-16f5e721b6ea" Name="Icon" Type="jpg"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
SUQ9InhtcC5paWQ6NDAyNEQ0OURFQzE5MTFFMTkzMTNEOTkyNDE5OTBCMzciIHhtcE1NOkRvY3Vt
ZW50SUQ9InhtcC5kaWQ6NDAyNEQ0OUVFQzE5MTFFMTkzMTNEOTkyNDE5OTBCMzciPiA8eG1wTU06
RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDI0RDQ5QkVDMTkxMUUxOTMx
M0Q5OTI0MTk5MEIzNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDI0RDQ5Q0VDMTkxMUUx
OTMxM0Q5OTI0MTk5MEIzNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
bWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlPjWRUAAAHzSURBVHjahFM7T1RREP7muH9AfoAFjdhI
JZWNxS4IQVcDcbGyICQSE3tCYwtGExMLi22MDyAxKxgkGyFxW0PiP7Cy0Wi2E/bee844M+feu7tZ
jGf3u+c1883zEDOjc/AY+eD4lYmo2PWHnO21ntDgkev++orJqaqgBiUzFCSIKH/B283cbLUkqPQF
Ca3XT3HWqN99OOgf9j9+igpGQGKTg20fPTuQyZmrxaxYX72G+tKDQmcwXKLfP74wyMmKTIBkPTwT
jjsbeL/dxs3GKoYZGC6IdeYsxmfrPoq9hXFnGq23zxFENoisgkMQP3Nl5hwhg55Vjy6IcBQsxu3G
DHa3XuSySpSCfn7/LH4UMZ8zl68fTpRK7dq3mAsNR3Mg/7X7NdxYvGdJcNGqWhJPOMXs/gSohxIz
H8YRfCoyae5+ZiWOYadwXi8MGeZbk6BTGsHcu4t5zAkgckEIfJYYsWOfGMGt7SugP/gn5l9dgvcZ
MiNhU1Y9p5+Fl1dBJ/gv6s3Lkt8epDbRayGseGHaarTLXl9qTo904s5Kx/pCk+aDpFvkhKAL6wNh
8hKGJpCF7Cz3g9x7tex7tl7fbJJYHwvej1U0m0odmGJvntKIB4GTWEaJnaXUOhaW38THFELS1R5g
ju9DSnd+hCBLuv0X7Ybu/gowAMUkYJuZo2aTAAAAAElFTkSuQmCC]]></Resource>
    <Resource ID="e120cfa3-382b-dec8-dd33-16f6162944fa" Name="Icon" Type="png"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
bWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0
NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNl
SUQ9InhtcC5paWQ6NDAyNEQ0OURFQzE5MTFFMTkzMTNEOTkyNDE5OTBCMzciIHhtcE1NOkRvY3Vt
ZW50SUQ9InhtcC5kaWQ6NDAyNEQ0OUVFQzE5MTFFMTkzMTNEOTkyNDE5OTBCMzciPiA8eG1wTU06
RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDI0RDQ5QkVDMTkxMUUxOTMx
M0Q5OTI0MTk5MEIzNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDI0RDQ5Q0VDMTkxMUUx
OTMxM0Q5OTI0MTk5MEIzNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1w
bWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlPjWRUAAAHzSURBVHjahFM7T1RREP7muH9AfoAFjdhI
JZWNxS4IQVcDcbGyICQSE3tCYwtGExMLi22MDyAxKxgkGyFxW0PiP7Cy0Wi2E/bee844M+feu7tZ
jGf3u+c1883zEDOjc/AY+eD4lYmo2PWHnO21ntDgkev++orJqaqgBiUzFCSIKH/B283cbLUkqPQF
Ca3XT3HWqN99OOgf9j9+igpGQGKTg20fPTuQyZmrxaxYX72G+tKDQmcwXKLfP74wyMmKTIBkPTwT
jjsbeL/dxs3GKoYZGC6IdeYsxmfrPoq9hXFnGq23zxFENoisgkMQP3Nl5hwhg55Vjy6IcBQsxu3G
DHa3XuSySpSCfn7/LH4UMZ8zl68fTpRK7dq3mAsNR3Mg/7X7NdxYvGdJcNGqWhJPOMXs/gSohxIz
H8YRfCoyae5+ZiWOYadwXi8MGeZbk6BTGsHcu4t5zAkgckEIfJYYsWOfGMGt7SugP/gn5l9dgvcZ
MiNhU1Y9p5+Fl1dBJ/gv6s3Lkt8epDbRayGseGHaarTLXl9qTo904s5Kx/pCk+aDpFvkhKAL6wNh
8hKGJpCF7Cz3g9x7tex7tl7fbJJYHwvej1U0m0odmGJvntKIB4GTWEaJnaXUOhaW38THFELS1R5g
ju9DSnd+hCBLuv0X7Ybu/gowAMUkYJuZo2aTAAAAAElFTkSuQmCC]]></Resource>
    <Resource ID="b4993ec8-6d66-8240-22a7-48fbbedfe371" Name="jquery.fileupload-n-plugins.js" Type="js"><![CDATA[Ci8qCiAqIGpRdWVyeSBGaWxlIFVwbG9hZCBQbHVnaW4gNC41LjEKICogaHR0cHM6Ly9naXRodWIu
Y29tL2JsdWVpbXAvalF1ZXJ5LUZpbGUtVXBsb2FkCiAqCiAqIENvcHlyaWdodCAyMDEwLCBTZWJh
c3RpYW4gVHNjaGFuCiAqIGh0dHBzOi8vYmx1ZWltcC5uZXQKICoKICogTGljZW5zZWQgdW5kZXIg
dGhlIE1JVCBsaWNlbnNlOgogKiBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9N
SVQvCiAqLwoKLypqc2xpbnQgYnJvd3NlcjogdHJ1ZSwgdW5wYXJhbTogdHJ1ZSAqLwovKmdsb2Jh
bCBYTUxIdHRwUmVxdWVzdFVwbG9hZCwgRmlsZSwgRmlsZVJlYWRlciwgRm9ybURhdGEsIFByb2dy
ZXNzRXZlbnQsIHVuZXNjYXBlLCBqUXVlcnksIHVwbG9hZCAqLwoKKGZ1bmN0aW9uICgkKSB7CiAg
ICAndXNlIHN0cmljdCc7CgogICAgdmFyIGRlZmF1bHROYW1lc3BhY2UgPSAnZmlsZV91cGxvYWQn
LAogICAgICAgIHVuZGVmID0gJ3VuZGVmaW5lZCcsCiAgICAgICAgZnVuYyA9ICdmdW5jdGlvbics
CiAgICAgICAgRmlsZVVwbG9hZCwKICAgICAgICBtZXRob2RzLAoKICAgICAgICBNdWx0aUxvYWRl
ciA9IGZ1bmN0aW9uIChjYWxsQmFjaywgbnVtT3JMaXN0KSB7CiAgICAgICAgICAgIHZhciBsb2Fk
ZWQgPSAwLAogICAgICAgICAgICAgICAgbGlzdCA9IFtdOwogICAgICAgICAgICBpZiAobnVtT3JM
aXN0KSB7CiAgICAgICAgICAgICAgICBpZiAobnVtT3JMaXN0Lmxlbmd0aCkgewogICAgICAgICAg
ICAgICAgICAgIGxpc3QgPSBudW1Pckxpc3Q7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAg
ICAgICAgICAgICAgICAgIGxpc3RbbnVtT3JMaXN0IC0gMV0gPSBudWxsOwogICAgICAgICAgICAg
ICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuY29tcGxldGUgPSBmdW5jdGlvbiAo
KSB7CiAgICAgICAgICAgICAgICBsb2FkZWQgKz0gMTsKICAgICAgICAgICAgICAgIGlmIChsb2Fk
ZWQgPT09IGxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sobGlzdCk7
CiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gMDsKICAgICAgICAgICAgICAgICAgICBsaXN0
ID0gW107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMu
cHVzaCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBsaXN0LnB1c2goaXRlbSk7
CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCA9IGZ1bmN0aW9uICgpIHsK
ICAgICAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgICAgICB9OwogICAgICAgIH0sCiAg
ICAgICAgCiAgICAgICAgU2VxdWVuY2VIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAg
ICB2YXIgc2VxdWVuY2UgPSBbXTsKICAgICAgICAgICAgdGhpcy5wdXNoID0gZnVuY3Rpb24gKGNh
bGxCYWNrKSB7CiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5wdXNoKGNhbGxCYWNrKTsKICAgICAg
ICAgICAgICAgIGlmIChzZXF1ZW5jZS5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAgICAg
ICBjYWxsQmFjaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAg
ICB0aGlzLm5leHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzZXF1ZW5jZS5zaGlm
dCgpOwogICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlLmxlbmd0aCkgewogICAgICAgICAgICAg
ICAgICAgIHNlcXVlbmNlWzBdKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAg
ICAgICAgfTsKICAgICAgICAKICAgIEZpbGVVcGxvYWQgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7
CiAgICAgICAgdmFyIGZpbGVVcGxvYWQgPSB0aGlzLAogICAgICAgICAgICB1cGxvYWRGb3JtLAog
ICAgICAgICAgICBmaWxlSW5wdXQsCiAgICAgICAgICAgIHNldHRpbmdzID0gewogICAgICAgICAg
ICAgICAgbmFtZXNwYWNlOiBkZWZhdWx0TmFtZXNwYWNlLAogICAgICAgICAgICAgICAgdXBsb2Fk
Rm9ybUZpbHRlcjogZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu
IHRydWU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZmlsZUlucHV0RmlsdGVy
OiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg
ICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjc3NDbGFzczogZGVmYXVsdE5hbWVzcGFj
ZSwKICAgICAgICAgICAgICAgIGRyYWdEcm9wU3VwcG9ydDogdHJ1ZSwKICAgICAgICAgICAgICAg
IGRyb3Bab25lOiBjb250YWluZXIsCiAgICAgICAgICAgICAgICB1cmw6IGZ1bmN0aW9uIChmb3Jt
KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZvcm0uYXR0cignYWN0aW9uJyk7CiAgICAg
ICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWV0aG9kOiBmdW5jdGlvbiAoZm9ybSkgewog
ICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JtLmF0dHIoJ21ldGhvZCcpOwogICAgICAgICAg
ICAgICAgfSwKICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogZnVuY3Rpb24gKGlucHV0KSB7CiAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LmF0dHIoJ25hbWUnKTsKICAgICAgICAgICAg
ICAgIH0sCiAgICAgICAgICAgICAgICBmb3JtRGF0YTogZnVuY3Rpb24gKGZvcm0pIHsKICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gZm9ybS5zZXJpYWxpemVBcnJheSgpOwogICAgICAgICAgICAg
ICAgfSwKICAgICAgICAgICAgICAgIHJlcXVlc3RIZWFkZXJzOiBudWxsLAogICAgICAgICAgICAg
ICAgbXVsdGlwYXJ0OiB0cnVlLAogICAgICAgICAgICAgICAgbXVsdGlGaWxlUmVxdWVzdDogZmFs
c2UsCiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlLAogICAgICAgICAgICAg
ICAgZm9yY2VJZnJhbWVVcGxvYWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgc2VxdWVudGlhbFVw
bG9hZHM6IGZhbHNlLAogICAgICAgICAgICAgICAgbWF4Q2h1bmtTaXplOiBudWxsLAogICAgICAg
ICAgICAgICAgbWF4RmlsZVJlYWRlclNpemU6IDUwMDAwMDAwLAogICAgICAgICAgICAgICAgcmVw
bGFjZUZpbGVJbnB1dDogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBkb2N1bWVudExp
c3RlbmVycyA9IHt9LAogICAgICAgICAgICBkcm9wWm9uZUxpc3RlbmVycyA9IHt9LAogICAgICAg
ICAgICBwcm90b2NvbFJlZ0V4cCA9IC9eaHR0cChzKT86XC9cLy8sCiAgICAgICAgICAgIG9wdGlv
bnNSZWZlcmVuY2UsCiAgICAgICAgICAgIG11bHRpTG9hZGVyID0gbmV3IE11bHRpTG9hZGVyKGZ1
bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLm9uTG9h
ZEFsbCA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uTG9hZEFsbChs
aXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHNlcXVl
bmNlSGFuZGxlciA9IG5ldyBTZXF1ZW5jZUhhbmRsZXIoKSwKICAgICAgICAgICAgCiAgICAgICAg
ICAgIGNvbXBsZXRlTmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG11bHRpTG9h
ZGVyLmNvbXBsZXRlKCk7CiAgICAgICAgICAgICAgICBzZXF1ZW5jZUhhbmRsZXIubmV4dCgpOwog
ICAgICAgICAgICB9LAoKICAgICAgICAgICAgaXNYSFJVcGxvYWRDYXBhYmxlID0gZnVuY3Rpb24g
KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gdW5k
ZWYgJiYgdHlwZW9mIFhNTEh0dHBSZXF1ZXN0VXBsb2FkICE9PSB1bmRlZiAmJgogICAgICAgICAg
ICAgICAgICAgIHR5cGVvZiBGaWxlICE9PSB1bmRlZiAmJiAoIXNldHRpbmdzLm11bHRpcGFydCB8
fCB0eXBlb2YgRm9ybURhdGEgIT09IHVuZGVmIHx8CiAgICAgICAgICAgICAgICAgICAgKHR5cGVv
ZiBGaWxlUmVhZGVyICE9PSB1bmRlZiAmJiB0eXBlb2YgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBl
LnNlbmRBc0JpbmFyeSA9PT0gZnVuYykpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgaW5p
dEV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGlu
Z3MuZHJhZ0Ryb3BTdXBwb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR0
aW5ncy5vbkRvY3VtZW50RHJhZ0VudGVyID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgIGRvY3VtZW50TGlzdGVuZXJzWydkcmFnZW50ZXIuJyArIHNldHRpbmdzLm5hbWVzcGFjZV0g
PSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25E
b2N1bWVudERyYWdFbnRlcihlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5vbkRv
Y3VtZW50RHJhZ0xlYXZlID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3Vt
ZW50TGlzdGVuZXJzWydkcmFnbGVhdmUuJyArIHNldHRpbmdzLm5hbWVzcGFjZV0gPSBmdW5jdGlv
biAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25Eb2N1bWVudERy
YWdMZWF2ZShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRMaXN0ZW5lcnNbJ2RyYWdvdmVyLicgICAr
IHNldHRpbmdzLm5hbWVzcGFjZV0gPSBmaWxlVXBsb2FkLm9uRG9jdW1lbnREcmFnT3ZlcjsKICAg
ICAgICAgICAgICAgICAgICBkb2N1bWVudExpc3RlbmVyc1snZHJvcC4nICAgICAgICsgc2V0dGlu
Z3MubmFtZXNwYWNlXSA9IGZpbGVVcGxvYWQub25Eb2N1bWVudERyb3A7CiAgICAgICAgICAgICAg
ICAgICAgJChkb2N1bWVudCkuYmluZChkb2N1bWVudExpc3RlbmVycyk7CiAgICAgICAgICAgICAg
ICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5vbkRyYWdFbnRlciA9PT0gZnVuYykgewogICAgICAg
ICAgICAgICAgICAgICAgICBkcm9wWm9uZUxpc3RlbmVyc1snZHJhZ2VudGVyLicgKyBzZXR0aW5n
cy5uYW1lc3BhY2VdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHNldHRpbmdzLm9uRHJhZ0VudGVyKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAg
ICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdz
Lm9uRHJhZ0xlYXZlID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bab25l
TGlzdGVuZXJzWydkcmFnbGVhdmUuJyArIHNldHRpbmdzLm5hbWVzcGFjZV0gPSBmdW5jdGlvbiAo
ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25EcmFnTGVhdmUoZSk7
CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgIGRyb3Bab25lTGlzdGVuZXJzWydkcmFnb3Zlci4nICAgKyBzZXR0aW5ncy5u
YW1lc3BhY2VdID0gZmlsZVVwbG9hZC5vbkRyYWdPdmVyOwogICAgICAgICAgICAgICAgICAgIGRy
b3Bab25lTGlzdGVuZXJzWydkcm9wLicgICAgICAgKyBzZXR0aW5ncy5uYW1lc3BhY2VdID0gZmls
ZVVwbG9hZC5vbkRyb3A7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuZHJvcFpvbmUuYmlu
ZChkcm9wWm9uZUxpc3RlbmVycyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBm
aWxlSW5wdXQuYmluZCgnY2hhbmdlLicgKyBzZXR0aW5ncy5uYW1lc3BhY2UsIGZpbGVVcGxvYWQu
b25DaGFuZ2UpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcmVtb3ZlRXZlbnRIYW5kbGVy
cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQuZWFjaChkb2N1bWVudExpc3RlbmVy
cywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50
KS51bmJpbmQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAg
ICQuZWFjaChkcm9wWm9uZUxpc3RlbmVycywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgICAg
ICAgICAgICAgICAgICBzZXR0aW5ncy5kcm9wWm9uZS51bmJpbmQoa2V5LCB2YWx1ZSk7CiAgICAg
ICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGZpbGVJbnB1dC51bmJpbmQoJ2NoYW5nZS4n
ICsgc2V0dGluZ3MubmFtZXNwYWNlKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGlzQ2h1
bmtlZFVwbG9hZCA9IGZ1bmN0aW9uIChzZXR0aW5ncykgewogICAgICAgICAgICAgICAgcmV0dXJu
IHR5cGVvZiBzZXR0aW5ncy51cGxvYWRlZEJ5dGVzICE9PSB1bmRlZjsKICAgICAgICAgICAgfSwK
CiAgICAgICAgICAgIGNyZWF0ZVByb2dyZXNzRXZlbnQgPSBmdW5jdGlvbiAobGVuZ3RoQ29tcHV0
YWJsZSwgbG9hZGVkLCB0b3RhbCkgewogICAgICAgICAgICAgICAgdmFyIGV2ZW50OwogICAgICAg
ICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA9PT0gZnVuYyAmJiB0eXBl
b2YgUHJvZ3Jlc3NFdmVudCAhPT0gdW5kZWYpIHsKICAgICAgICAgICAgICAgICAgICBldmVudCA9
IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdQcm9ncmVzc0V2ZW50Jyk7CmlmICh0eXBlb2YgZXZlbnQu
aW5pdFByb2dyZXNzRXZlbnQgIT09IHVuZGVmKQogICAgICAgICAgICAgICAgICAgIGV2ZW50Lmlu
aXRQcm9ncmVzc0V2ZW50KAogICAgICAgICAgICAgICAgICAgICAgICAncHJvZ3Jlc3MnLAogICAg
ICAgICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2Us
CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aENvbXB1dGFibGUsCiAgICAgICAgICAgICAg
ICAgICAgICAgIGxvYWRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgdG90YWwKICAgICAgICAg
ICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAg
ICBldmVudCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoQ29tcHV0YWJsZTogdHJ1
ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkOiBsb2FkZWQsCiAgICAgICAgICAgICAg
ICAgICAgICAgIHRvdGFsOiB0b3RhbAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQ7CiAgICAgICAgICAgIH0sCgogICAg
ICAgICAgICBnZXRQcm9ncmVzc1RvdGFsID0gZnVuY3Rpb24gKGZpbGVzLCBpbmRleCwgc2V0dGlu
Z3MpIHsKICAgICAgICAgICAgICAgIHZhciBpLAogICAgICAgICAgICAgICAgICAgIHRvdGFsOwog
ICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5wcm9ncmVzc1RvdGFsID09PSB1bmRl
ZikgewogICAgICAgICAgICAgICAgICAgIGlmIChmaWxlc1tpbmRleF0pIHsKICAgICAgICAgICAg
ICAgICAgICAgICAgdG90YWwgPSBmaWxlc1tpbmRleF0uc2l6ZTsKICAgICAgICAgICAgICAgICAg
ICAgICAgc2V0dGluZ3MucHJvZ3Jlc3NUb3RhbCA9IHRvdGFsID8gdG90YWwgOiAxOwogICAgICAg
ICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsID0gMDsK
ICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSAr
PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSBmaWxlc1tpXS5zaXpl
OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRp
bmdzLnByb2dyZXNzVG90YWwgPSB0b3RhbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MucHJvZ3Jlc3NUb3RhbDsK
ICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGhhbmRsZUdsb2JhbFByb2dyZXNzID0gZnVuY3Rp
b24gKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgc2V0dGluZ3MpIHsKICAgICAgICAgICAgICAg
IHZhciBwcm9ncmVzc0V2ZW50LAogICAgICAgICAgICAgICAgICAgIGxvYWRlckxpc3QsCiAgICAg
ICAgICAgICAgICAgICAgZ2xvYmFsTG9hZGVkID0gMCwKICAgICAgICAgICAgICAgICAgICBnbG9i
YWxUb3RhbCA9IDA7CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSAm
JiB0eXBlb2Ygc2V0dGluZ3Mub25Qcm9ncmVzc0FsbCA9PT0gZnVuYykgewogICAgICAgICAgICAg
ICAgICAgIHNldHRpbmdzLnByb2dyZXNzTG9hZGVkID0gcGFyc2VJbnQoCiAgICAgICAgICAgICAg
ICAgICAgICAgIGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsICogZ2V0UHJvZ3Jlc3NUb3RhbChm
aWxlcywgaW5kZXgsIHNldHRpbmdzKSwKICAgICAgICAgICAgICAgICAgICAgICAgMTAKICAgICAg
ICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGxvYWRlckxpc3QgPSBtdWx0aUxv
YWRlci5nZXRMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGxvYWRlckxpc3QsIGZ1
bmN0aW9uIChpbmRleCwgaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVtIGlz
IGFuIGFycmF5IHdpdGggW2ZpbGVzLCBpbmRleCwgeGhyLCBzZXR0aW5nc10KICAgICAgICAgICAg
ICAgICAgICAgICAgZ2xvYmFsTG9hZGVkICs9IGl0ZW1bM10ucHJvZ3Jlc3NMb2FkZWQgfHwgMDsK
ICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVG90YWwgKz0gZ2V0UHJvZ3Jlc3NUb3RhbChp
dGVtWzBdLCBpdGVtWzFdLCBpdGVtWzNdKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAg
ICAgICAgICAgICAgICBwcm9ncmVzc0V2ZW50ID0gY3JlYXRlUHJvZ3Jlc3NFdmVudCgKICAgICAg
ICAgICAgICAgICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9h
ZGVkLAogICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxUb3RhbAogICAgICAgICAgICAgICAg
ICAgICk7CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25Qcm9ncmVzc0FsbChwcm9ncmVz
c0V2ZW50LCBsb2FkZXJMaXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAg
ICAgICAgICAgCiAgICAgICAgICAgIGhhbmRsZUxvYWRFdmVudCA9IGZ1bmN0aW9uIChldmVudCwg
ZmlsZXMsIGluZGV4LCB4aHIsIHNldHRpbmdzKSB7CiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jl
c3NFdmVudDsKICAgICAgICAgICAgICAgIGlmIChpc0NodW5rZWRVcGxvYWQoc2V0dGluZ3MpKSB7
CiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MudXBsb2FkZWRCeXRlcyArPSBzZXR0aW5ncy5j
aHVua1NpemU7CiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NFdmVudCA9IGNyZWF0ZVByb2dy
ZXNzRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICAg
ICAgICAgIHNldHRpbmdzLnVwbG9hZGVkQnl0ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGZp
bGVzW2luZGV4XS5zaXplCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAg
ICBpZiAodHlwZW9mIHNldHRpbmdzLm9uUHJvZ3Jlc3MgPT09IGZ1bmMpIHsKICAgICAgICAgICAg
ICAgICAgICAgICAgc2V0dGluZ3Mub25Qcm9ncmVzcyhwcm9ncmVzc0V2ZW50LCBmaWxlcywgaW5k
ZXgsIHhociwgc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg
ICAgICBoYW5kbGVHbG9iYWxQcm9ncmVzcyhwcm9ncmVzc0V2ZW50LCBmaWxlcywgaW5kZXgsIHho
ciwgc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy51cGxvYWRlZEJ5
dGVzIDwgZmlsZXNbaW5kZXhdLnNpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5
cGVvZiBzZXR0aW5ncy5yZXN1bWVVcGxvYWQgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHNldHRpbmdzLnJlc3VtZVVwbG9hZCgKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcywKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCwKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB4aHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Ms
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWQoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhy
LCBzZXR0aW5ncywgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNl
IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZChldmVudCwgZmlsZXMsIGluZGV4
LCB4aHIsIHNldHRpbmdzLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICAgICAgfQogICAgICAgICAgICAgICAgc2V0dGluZ3MucHJvZ3Jlc3NMb2FkZWQgPSBnZXRQcm9n
cmVzc1RvdGFsKGZpbGVzLCBpbmRleCwgc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgaWYgKHR5
cGVvZiBzZXR0aW5ncy5vbkxvYWQgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICBzZXR0
aW5ncy5vbkxvYWQoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBzZXR0aW5ncyk7CiAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgICAgICBjb21wbGV0ZU5leHQoKTsKICAgICAgICAgICAgfSwK
ICAgICAgICAgICAgCiAgICAgICAgICAgIGhhbmRsZVByb2dyZXNzRXZlbnQgPSBmdW5jdGlvbiAo
ZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAgdmFy
IHByb2dyZXNzRXZlbnQgPSBldmVudDsKICAgICAgICAgICAgICAgIGlmIChpc0NodW5rZWRVcGxv
YWQoc2V0dGluZ3MpICYmIGV2ZW50Lmxlbmd0aENvbXB1dGFibGUpIHsKICAgICAgICAgICAgICAg
ICAgICBwcm9ncmVzc0V2ZW50ID0gY3JlYXRlUHJvZ3Jlc3NFdmVudCgKICAgICAgICAgICAgICAg
ICAgICAgICAgdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MudXBsb2FkZWRC
eXRlcyArIHBhcnNlSW50KGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsICogc2V0dGluZ3MuY2h1
bmtTaXplLCAxMCksCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVzW2luZGV4XS5zaXplCiAg
ICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm
ICh0eXBlb2Ygc2V0dGluZ3Mub25Qcm9ncmVzcyA9PT0gZnVuYykgewogICAgICAgICAgICAgICAg
ICAgIHNldHRpbmdzLm9uUHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCwgZmlsZXMsIGluZGV4LCB4aHIs
IHNldHRpbmdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhbmRsZUdsb2Jh
bFByb2dyZXNzKHByb2dyZXNzRXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBzZXR0aW5ncyk7CiAg
ICAgICAgICAgIH0sCiAgICAgICAgICAgIAogICAgICAgICAgICBpbml0VXBsb2FkRXZlbnRIYW5k
bGVycyA9IGZ1bmN0aW9uIChmaWxlcywgaW5kZXgsIHhociwgc2V0dGluZ3MpIHsKICAgICAgICAg
ICAgICAgIGlmICh4aHIudXBsb2FkKSB7CiAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5v
bnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxl
UHJvZ3Jlc3NFdmVudChlLCBmaWxlcywgaW5kZXgsIHhociwgc2V0dGluZ3MpOwogICAgICAgICAg
ICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB4aHIub25sb2Fk
ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVMb2FkRXZlbnQoZSwg
ZmlsZXMsIGluZGV4LCB4aHIsIHNldHRpbmdzKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAg
ICAgICAgICB4aHIub25hYm9ydCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAg
c2V0dGluZ3MucHJvZ3Jlc3NUb3RhbCA9IHNldHRpbmdzLnByb2dyZXNzTG9hZGVkOwogICAgICAg
ICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3Mub25BYm9ydCA9PT0gZnVuYykgewogICAg
ICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbkFib3J0KGUsIGZpbGVzLCBpbmRleCwgeGhy
LCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNv
bXBsZXRlTmV4dCgpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHhoci5vbmVy
cm9yID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5wcm9ncmVz
c1RvdGFsID0gc2V0dGluZ3MucHJvZ3Jlc3NMb2FkZWQ7CiAgICAgICAgICAgICAgICAgICAgaWYg
KHR5cGVvZiBzZXR0aW5ncy5vbkVycm9yID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgIHNldHRpbmdzLm9uRXJyb3IoZSwgZmlsZXMsIGluZGV4LCB4aHIsIHNldHRpbmdzKTsKICAg
ICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVOZXh0KCk7CiAg
ICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZ2V0VXJsID0gZnVu
Y3Rpb24gKHNldHRpbmdzKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLnVy
bCA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncy51cmwoc2V0
dGluZ3MudXBsb2FkRm9ybSB8fCB1cGxvYWRGb3JtKTsKICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgIHJldHVybiBzZXR0aW5ncy51cmw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAg
IAogICAgICAgICAgICBnZXRNZXRob2QgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHsKICAgICAgICAg
ICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MubWV0aG9kID09PSBmdW5jKSB7CiAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIHNldHRpbmdzLm1ldGhvZChzZXR0aW5ncy51cGxvYWRGb3JtIHx8IHVw
bG9hZEZvcm0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHNldHRp
bmdzLm1ldGhvZDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgCiAgICAgICAgICAgIGdldEZp
ZWxkTmFtZSA9IGZ1bmN0aW9uIChzZXR0aW5ncykgewogICAgICAgICAgICAgICAgaWYgKHR5cGVv
ZiBzZXR0aW5ncy5maWVsZE5hbWUgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1
cm4gc2V0dGluZ3MuZmllbGROYW1lKHNldHRpbmdzLmZpbGVJbnB1dCB8fCBmaWxlSW5wdXQpOwog
ICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLmZpZWxkTmFt
ZTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldEZvcm1EYXRhID0gZnVuY3Rpb24gKHNl
dHRpbmdzKSB7CiAgICAgICAgICAgICAgICB2YXIgZm9ybURhdGE7CiAgICAgICAgICAgICAgICBp
ZiAodHlwZW9mIHNldHRpbmdzLmZvcm1EYXRhID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAg
ICAgcmV0dXJuIHNldHRpbmdzLmZvcm1EYXRhKHNldHRpbmdzLnVwbG9hZEZvcm0gfHwgdXBsb2Fk
Rm9ybSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQuaXNBcnJheShzZXR0aW5ncy5mb3Jt
RGF0YSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MuZm9ybURhdGE7CiAg
ICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNldHRpbmdzLmZvcm1EYXRhKSB7CiAgICAgICAgICAg
ICAgICAgICAgZm9ybURhdGEgPSBbXTsKICAgICAgICAgICAgICAgICAgICAkLmVhY2goc2V0dGlu
Z3MuZm9ybURhdGEsIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAg
ICAgICBmb3JtRGF0YS5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9KTsKICAgICAgICAg
ICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9ybURhdGE7CiAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0sCgog
ICAgICAgICAgICBpc1NhbWVEb21haW4gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgICAg
ICBpZiAocHJvdG9jb2xSZWdFeHAudGVzdCh1cmwpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFy
IGhvc3QgPSBsb2NhdGlvbi5ob3N0LAogICAgICAgICAgICAgICAgICAgICAgICBpbmRleFN0YXJ0
ID0gbG9jYXRpb24ucHJvdG9jb2wubGVuZ3RoICsgMiwKICAgICAgICAgICAgICAgICAgICAgICAg
aW5kZXggPSB1cmwuaW5kZXhPZihob3N0LCBpbmRleFN0YXJ0KSwKICAgICAgICAgICAgICAgICAg
ICAgICAgcGF0aEluZGV4ID0gaW5kZXggKyBob3N0Lmxlbmd0aDsKICAgICAgICAgICAgICAgICAg
ICBpZiAoKGluZGV4ID09PSBpbmRleFN0YXJ0IHx8IGluZGV4ID09PSB1cmwuaW5kZXhPZignQCcs
IGluZGV4U3RhcnQpICsgMSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1cmwubGVu
Z3RoID09PSBwYXRoSW5kZXggfHwgJC5pbkFycmF5KHVybC5jaGFyQXQocGF0aEluZGV4KSwgWycv
JywgJz8nLCAnIyddKSAhPT0gLTEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0
cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFs
c2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg
ICAgICAgfSwKCiAgICAgICAgICAgIGluaXRVcGxvYWRSZXF1ZXN0ID0gZnVuY3Rpb24gKGZpbGVz
LCBpbmRleCwgeGhyLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBmaWxl
c1tpbmRleF0sCiAgICAgICAgICAgICAgICAgICAgdXJsID0gZ2V0VXJsKHNldHRpbmdzKSwKICAg
ICAgICAgICAgICAgICAgICBzYW1lRG9tYWluID0gaXNTYW1lRG9tYWluKHVybCk7CiAgICAgICAg
ICAgICAgICB4aHIub3BlbihnZXRNZXRob2Qoc2V0dGluZ3MpLCB1cmwsIHRydWUpOwogICAgICAg
ICAgICAgICAgaWYgKHNhbWVEb21haW4pIHsKICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVx
dWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpOwogICAgICAg
ICAgICAgICAgICAgIGlmICghc2V0dGluZ3MubXVsdGlwYXJ0IHx8IGlzQ2h1bmtlZFVwbG9hZChz
ZXR0aW5ncykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIo
J1gtRmlsZS1OYW1lJywgZmlsZS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNl
dFJlcXVlc3RIZWFkZXIoJ1gtRmlsZS1UeXBlJywgZmlsZS50eXBlKTsKICAgICAgICAgICAgICAg
ICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtRmlsZS1TaXplJywgZmlsZS5zaXplKTsK
ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0NodW5rZWRVcGxvYWQoc2V0dGluZ3MpKSB7
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVu
dC1UeXBlJywgZmlsZS50eXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgh
c2V0dGluZ3MubXVsdGlwYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0
UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScp
OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgfSBlbHNlIGlmIChzZXR0aW5ncy53aXRoQ3JlZGVudGlhbHMpIHsKICAgICAgICAg
ICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0K
ICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkoc2V0dGluZ3MucmVxdWVzdEhlYWRlcnMpKSB7
CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKHNldHRpbmdzLnJlcXVlc3RIZWFkZXJzLCBmdW5j
dGlvbiAoaW5kZXgsIGhlYWRlcikgewogICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVx
dWVzdEhlYWRlcihoZWFkZXIubmFtZSwgaGVhZGVyLnZhbHVlKTsKICAgICAgICAgICAgICAgICAg
ICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MucmVxdWVzdEhlYWRlcnMp
IHsKICAgICAgICAgICAgICAgICAgICAkLmVhY2goc2V0dGluZ3MucmVxdWVzdEhlYWRlcnMsIGZ1
bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVx
dWVzdEhlYWRlcihuYW1lLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBmb3JtRGF0YVVwbG9hZCA9IGZ1
bmN0aW9uIChmaWxlcywgeGhyLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAgdmFyIGZvcm1E
YXRhID0gbmV3IEZvcm1EYXRhKCksCiAgICAgICAgICAgICAgICAgICAgaTsKICAgICAgICAgICAg
ICAgICQuZWFjaChnZXRGb3JtRGF0YShzZXR0aW5ncyksIGZ1bmN0aW9uIChpbmRleCwgZmllbGQp
IHsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoZmllbGQubmFtZSwgZmllbGQu
dmFsdWUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBp
IDwgZmlsZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICBmb3JtRGF0YS5h
cHBlbmQoZ2V0RmllbGROYW1lKHNldHRpbmdzKSwgZmlsZXNbaV0pOwogICAgICAgICAgICAgICAg
fQogICAgICAgICAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpOwogICAgICAgICAgICB9LAoKICAg
ICAgICAgICAgbG9hZEZpbGVDb250ZW50ID0gZnVuY3Rpb24gKGZpbGUsIGNhbGxCYWNrKSB7CiAg
ICAgICAgICAgICAgICBmaWxlLnJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAg
ICAgICBmaWxlLnJlYWRlci5vbmxvYWQgPSBjYWxsQmFjazsKICAgICAgICAgICAgICAgIGZpbGUu
cmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmaWxlKTsKICAgICAgICAgICAgfSwKCiAgICAgICAg
ICAgIHV0ZjhlbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g
dW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOwogICAgICAgICAgICB9LAoKICAgICAg
ICAgICAgYnVpbGRNdWx0aVBhcnRGb3JtRGF0YSA9IGZ1bmN0aW9uIChib3VuZGFyeSwgZmlsZXMs
IGZpbGVzRmllbGROYW1lLCBmaWVsZHMpIHsKICAgICAgICAgICAgICAgIHZhciBkb3VibGVEYXNo
ID0gJy0tJywKICAgICAgICAgICAgICAgICAgICBjcmxmICAgICA9ICdcclxuJywKICAgICAgICAg
ICAgICAgICAgICBmb3JtRGF0YSA9ICcnLAogICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtd
OwogICAgICAgICAgICAgICAgJC5lYWNoKGZpZWxkcywgZnVuY3Rpb24gKGluZGV4LCBmaWVsZCkg
ewogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhICs9IGRvdWJsZURhc2ggKyBib3VuZGFyeSAr
IGNybGYgKwogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbjogZm9y
bS1kYXRhOyBuYW1lPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgdXRmOGVuY29kZShmaWVs
ZC5uYW1lKSArCiAgICAgICAgICAgICAgICAgICAgICAgICciJyArIGNybGYgKyBjcmxmICsKICAg
ICAgICAgICAgICAgICAgICAgICAgdXRmOGVuY29kZShmaWVsZC52YWx1ZSkgKyBjcmxmOwogICAg
ICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uIChp
bmRleCwgZmlsZSkgewogICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhICs9IGRvdWJsZURhc2gg
KyBib3VuZGFyeSArIGNybGYgKwogICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1EaXNw
b3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPSInICsKICAgICAgICAgICAgICAgICAgICAgICAgdXRm
OGVuY29kZShmaWxlc0ZpZWxkTmFtZSkgKwogICAgICAgICAgICAgICAgICAgICAgICAnIjsgZmls
ZW5hbWU9IicgKyB1dGY4ZW5jb2RlKGZpbGUubmFtZSkgKyAnIicgKyBjcmxmICsKICAgICAgICAg
ICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZTogJyArIHV0ZjhlbmNvZGUoZmlsZS50eXBlKSAr
IGNybGYgKyBjcmxmOwogICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKGZvcm1EYXRhKTsK
ICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChmaWxlLnJlYWRlci5yZXN1bHQpOwogICAg
ICAgICAgICAgICAgICAgIGRlbGV0ZSBmaWxlLnJlYWRlcjsKICAgICAgICAgICAgICAgICAgICBm
b3JtRGF0YSA9IGNybGY7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGZvcm1E
YXRhICs9IGRvdWJsZURhc2ggKyBib3VuZGFyeSArIGRvdWJsZURhc2ggKyBjcmxmOwogICAgICAg
ICAgICAgICAgYnVmZmVyLnB1c2goZm9ybURhdGEpOwogICAgICAgICAgICAgICAgcmV0dXJuIGJ1
ZmZlci5qb2luKCcnKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgCiAgICAgICAgICAgIGZp
bGVSZWFkZXJVcGxvYWQgPSBmdW5jdGlvbiAoZmlsZXMsIHhociwgc2V0dGluZ3MpIHsKICAgICAg
ICAgICAgICAgIHZhciBib3VuZGFyeSA9ICctLS0tTXVsdGlQYXJ0Rm9ybUJvdW5kYXJ5JyArIChu
ZXcgRGF0ZSgpKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgICAgICAgbG9hZGVyLAogICAgICAg
ICAgICAgICAgICAgIGk7CiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29u
dGVudC1UeXBlJywgJ211bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PScgKyBib3VuZGFyeSk7
CiAgICAgICAgICAgICAgICBsb2FkZXIgPSBuZXcgTXVsdGlMb2FkZXIoZnVuY3Rpb24gKCkgewog
ICAgICAgICAgICAgICAgICAgIHhoci5zZW5kQXNCaW5hcnkoYnVpbGRNdWx0aVBhcnRGb3JtRGF0
YSgKICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRhcnksCiAgICAgICAgICAgICAgICAgICAg
ICAgIGZpbGVzLAogICAgICAgICAgICAgICAgICAgICAgICBnZXRGaWVsZE5hbWUoc2V0dGluZ3Mp
LAogICAgICAgICAgICAgICAgICAgICAgICBnZXRGb3JtRGF0YShzZXR0aW5ncykKICAgICAgICAg
ICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgIH0sIGZpbGVzLmxlbmd0aCk7CiAgICAgICAg
ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAg
ICAgICAgICAgICBsb2FkRmlsZUNvbnRlbnQoZmlsZXNbaV0sIGxvYWRlci5jb21wbGV0ZSk7CiAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBnZXRCbG9iID0gZnVu
Y3Rpb24gKGZpbGUsIHNldHRpbmdzKSB7CiAgICAgICAgICAgICAgICB2YXIgYmxvYiwKICAgICAg
ICAgICAgICAgICAgICB1YiA9IHNldHRpbmdzLnVwbG9hZGVkQnl0ZXMsCiAgICAgICAgICAgICAg
ICAgICAgbWNzID0gc2V0dGluZ3MubWF4Q2h1bmtTaXplOwogICAgICAgICAgICAgICAgaWYgKGZp
bGUgJiYgdHlwZW9mIGZpbGUuc2xpY2UgPT09IGZ1bmMgJiYgKHViIHx8IChtY3MgJiYgbWNzIDwg
ZmlsZS5zaXplKSkpIHsKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy51cGxvYWRlZEJ5dGVz
ID0gdWIgPSB1YiB8fCAwOwogICAgICAgICAgICAgICAgICAgIGJsb2IgPSBmaWxlLnNsaWNlKHVi
LCBtY3MgfHwgZmlsZS5zaXplIC0gdWIpOwogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmNo
dW5rU2l6ZSA9IGJsb2Iuc2l6ZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvYjsKICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmaWxlOwogICAgICAgICAgICB9
LAoKICAgICAgICAgICAgdXBsb2FkID0gZnVuY3Rpb24gKGV2ZW50LCBmaWxlcywgaW5kZXgsIHho
ciwgc2V0dGluZ3MsIG5leHRDaHVuaykgewogICAgICAgICAgICAgICAgdmFyIHNlbmQ7CiAgICAg
ICAgICAgICAgICBzZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGlmICgh
bmV4dENodW5rKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3Mu
b25TZW5kID09PSBmdW5jICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGlu
Z3Mub25TZW5kKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgc2V0dGluZ3MpID09PSBmYWxzZSkg
ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVOZXh0KCk7CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBnZXRCbG9iKGZp
bGVzW2luZGV4XSwgc2V0dGluZ3MpLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlc1RvVXBs
b2FkOwogICAgICAgICAgICAgICAgICAgIGluaXRVcGxvYWRFdmVudEhhbmRsZXJzKGZpbGVzLCBp
bmRleCwgeGhyLCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgaW5pdFVwbG9hZFJlcXVl
c3QoZmlsZXMsIGluZGV4LCB4aHIsIHNldHRpbmdzKTsKICAgICAgICAgICAgICAgICAgICBpZiAo
IXNldHRpbmdzLm11bHRpcGFydCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnVw
bG9hZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoYmxvYik7CiAgICAg
ICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAk
LmVycm9yKCdCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgWEhSIGZpbGUgdXBsb2FkcycpOwogICAg
ICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg
ICAgICAgICAgICAgICAgICAgZmlsZXNUb1VwbG9hZCA9ICh0eXBlb2YgaW5kZXggPT09ICdudW1i
ZXInKSA/IFtibG9iXSA6IGZpbGVzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9m
IEZvcm1EYXRhICE9PSB1bmRlZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURh
dGFVcGxvYWQoZmlsZXNUb1VwbG9hZCwgeGhyLCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAg
ICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEZpbGVSZWFkZXIgIT09IHVuZGVmICYmIHR5cGVvZiB4
aHIuc2VuZEFzQmluYXJ5ID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBm
aWxlUmVhZGVyVXBsb2FkKGZpbGVzVG9VcGxvYWQsIHhociwgc2V0dGluZ3MpOwogICAgICAgICAg
ICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lcnJv
cignQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IG11bHRpcGFydC9mb3JtLWRhdGEgWEhSIGZpbGUg
dXBsb2FkcycpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAg
fQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmICghbmV4dENodW5rKSB7CiAg
ICAgICAgICAgICAgICAgICAgbXVsdGlMb2FkZXIucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2Uu
Y2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Vx
dWVudGlhbFVwbG9hZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VIYW5kbGVy
LnB1c2goc2VuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg
ICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZW5kKCk7CiAgICAg
ICAgICAgIH0sCgogICAgICAgICAgICBoYW5kbGVVcGxvYWQgPSBmdW5jdGlvbiAoZXZlbnQsIGZp
bGVzLCBpbnB1dCwgZm9ybSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcg
WE1MSHR0cFJlcXVlc3QoKSwKICAgICAgICAgICAgICAgICAgICB1cGxvYWRTZXR0aW5ncyA9ICQu
ZXh0ZW5kKHt9LCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICB1cGxvYWRTZXR0aW5ncy5maWxl
SW5wdXQgPSBpbnB1dDsKICAgICAgICAgICAgICAgIHVwbG9hZFNldHRpbmdzLnVwbG9hZEZvcm0g
PSBmb3JtOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGxvYWRTZXR0aW5ncy5pbml0VXBs
b2FkID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkU2V0dGluZ3MuaW5pdFVw
bG9hZCgKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAg
ICAgIGZpbGVzLAogICAgICAgICAgICAgICAgICAgICAgICBpbmRleCwKICAgICAgICAgICAgICAg
ICAgICAgICAgeGhyLAogICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRTZXR0aW5ncywKICAg
ICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdXBsb2FkKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgdXBsb2FkU2V0dGluZ3MpOwog
ICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAg
ICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkKGV2ZW50LCBmaWxlcywg
aW5kZXgsIHhociwgdXBsb2FkU2V0dGluZ3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICB9LAoKICAgICAgICAgICAgaGFuZGxlTGVnYWN5R2xvYmFsUHJvZ3Jlc3MgPSBmdW5jdGlvbiAo
ZXZlbnQsIGZpbGVzLCBpbmRleCwgaWZyYW1lLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAg
dmFyIHRvdGFsID0gMCwKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0V2ZW50OwogICAgICAg
ICAgICAgICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gdW5kZWYpIHsKICAgICAgICAgICAgICAgICAg
ICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uIChpbmRleCwgZmlsZSkgewogICAgICAgICAgICAgICAg
ICAgICAgICB0b3RhbCArPSBmaWxlLnNpemUgPyBmaWxlLnNpemUgOiAxOwogICAgICAgICAgICAg
ICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0
b3RhbCA9IGZpbGVzW2luZGV4XS5zaXplID8gZmlsZXNbaW5kZXhdLnNpemUgOiAxOwogICAgICAg
ICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJvZ3Jlc3NFdmVudCA9IGNyZWF0ZVByb2dyZXNz
RXZlbnQodHJ1ZSwgdG90YWwsIHRvdGFsKTsKICAgICAgICAgICAgICAgIHNldHRpbmdzLnByb2dy
ZXNzTG9hZGVkID0gdG90YWw7CiAgICAgICAgICAgICAgICBoYW5kbGVHbG9iYWxQcm9ncmVzcyhw
cm9ncmVzc0V2ZW50LCBmaWxlcywgaW5kZXgsIGlmcmFtZSwgc2V0dGluZ3MpOwogICAgICAgICAg
ICB9LAoKICAgICAgICAgICAgbGVnYWN5VXBsb2FkRm9ybURhdGFJbml0ID0gZnVuY3Rpb24gKGlu
cHV0LCBmb3JtLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gZ2V0
Rm9ybURhdGEoc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgZm9ybS5maW5kKCc6aW5wdXQnKS5u
b3QoJzpkaXNhYmxlZCcpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2Rpc2FibGVkJywgdHJ1
ZSkKICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3Moc2V0dGluZ3MubmFtZXNwYWNlICsgJ19k
aXNhYmxlZCcpOwogICAgICAgICAgICAgICAgJC5lYWNoKGZvcm1EYXRhLCBmdW5jdGlvbiAoaW5k
ZXgsIGZpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgJCgnPGlucHV0IHR5cGU9ImhpZGRlbiIv
PicpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgZmllbGQubmFtZSkKICAg
ICAgICAgICAgICAgICAgICAgICAgLnZhbChmaWVsZC52YWx1ZSkKICAgICAgICAgICAgICAgICAg
ICAgICAgLmFkZENsYXNzKHNldHRpbmdzLm5hbWVzcGFjZSArICdfZm9ybV9kYXRhJykKICAgICAg
ICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGZvcm0pOwogICAgICAgICAgICAgICAgfSk7CiAg
ICAgICAgICAgICAgICBpbnB1dAogICAgICAgICAgICAgICAgICAgIC5hdHRyKCduYW1lJywgZ2V0
RmllbGROYW1lKHNldHRpbmdzKSkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oZm9ybSk7
CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBsZWdhY3lVcGxvYWRGb3JtRGF0YVJlc2V0ID0g
ZnVuY3Rpb24gKGlucHV0LCBmb3JtLCBzZXR0aW5ncykgewogICAgICAgICAgICAgICAgaW5wdXQu
ZGV0YWNoKCk7CiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJy4nICsgc2V0dGluZ3MubmFtZXNw
YWNlICsgJ19kaXNhYmxlZCcpCiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2Rpc2Fi
bGVkJykKICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3Moc2V0dGluZ3MubmFtZXNwYWNl
ICsgJ19kaXNhYmxlZCcpOwogICAgICAgICAgICAgICAgZm9ybS5maW5kKCcuJyArIHNldHRpbmdz
Lm5hbWVzcGFjZSArICdfZm9ybV9kYXRhJykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0sCgogICAg
ICAgICAgICBsZWdhY3lVcGxvYWQgPSBmdW5jdGlvbiAoZXZlbnQsIGZpbGVzLCBpbnB1dCwgZm9y
bSwgaWZyYW1lLCBzZXR0aW5ncywgaW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciBzZW5kOwog
ICAgICAgICAgICAgICAgc2VuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBp
ZiAodHlwZW9mIHNldHRpbmdzLm9uU2VuZCA9PT0gZnVuYyAmJiBzZXR0aW5ncy5vblNlbmQoZXZl
bnQsIGZpbGVzLCBpbmRleCwgaWZyYW1lLCBzZXR0aW5ncykgPT09IGZhbHNlKSB7CiAgICAgICAg
ICAgICAgICAgICAgICAgIGNvbXBsZXRlTmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICBy
ZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBvcmln
aW5hbEF0dHJpYnV0ZXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiBmb3Jt
LmF0dHIoJ2FjdGlvbicpLAogICAgICAgICAgICAgICAgICAgICAgICAnbWV0aG9kJzogZm9ybS5h
dHRyKCdtZXRob2QnKSwKICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6IGZvcm0uYXR0
cigndGFyZ2V0JyksCiAgICAgICAgICAgICAgICAgICAgICAgICdlbmN0eXBlJzogZm9ybS5hdHRy
KCdlbmN0eXBlJykKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGlm
cmFtZQogICAgICAgICAgICAgICAgICAgICAgICAudW5iaW5kKCdhYm9ydCcpCiAgICAgICAgICAg
ICAgICAgICAgICAgIC5iaW5kKCdhYm9ydCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpZnJhbWUucmVhZHlTdGF0ZSA9IDA7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAvLyBqYXZhc2NyaXB0OmZhbHNlIGFzIGlmcmFtZSBzcmMgcHJldmVudHMgd2Fybmlu
ZyBwb3B1cHMgb24gSFRUUFMgaW4gSUU2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBj
b25jYXQgaXMgdXNlZCBoZXJlIHRvIHByZXZlbnQgdGhlICJTY3JpcHQgVVJMIiBKU0xpbnQgZXJy
b3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUudW5iaW5kKCdsb2FkJykuYXR0
cignc3JjJywgJ2phdmFzY3JpcHQnLmNvbmNhdCgnOmZhbHNlOycpKTsKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGhhbmRsZUxlZ2FjeUdsb2JhbFByb2dyZXNzKGUsIGZpbGVzLCBpbmRleCwg
aWZyYW1lLCBzZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9m
IHNldHRpbmdzLm9uQWJvcnQgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBzZXR0aW5ncy5vbkFib3J0KGUsIGZpbGVzLCBpbmRleCwgaWZyYW1lLCBzZXR0aW5ncyk7
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBjb21wbGV0ZU5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAg
ICAgICAgICAgICAgLnVuYmluZCgnbG9hZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5iaW5k
KCdsb2FkJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFt
ZS5yZWFkeVN0YXRlID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUxlZ2Fj
eUdsb2JhbFByb2dyZXNzKGUsIGZpbGVzLCBpbmRleCwgaWZyYW1lLCBzZXR0aW5ncyk7CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLm9uTG9hZCA9PT0gZnVu
YykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9uTG9hZChlLCBm
aWxlcywgaW5kZXgsIGlmcmFtZSwgc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4IGZvciBJRSBlbmRsZXNzIHBy
b2dyZXNzIGJhciBhY3Rpdml0eSBidWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICho
YXBwZW5zIG9uIGZvcm0gc3VibWl0cyB0byBpZnJhbWUgdGFyZ2V0cyk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAkKCc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDpmYWxzZTsiIHN0eWxlPSJk
aXNwbGF5Om5vbmU7Ij48L2lmcmFtZT4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IC5hcHBlbmRUbyhmb3JtKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNv
bXBsZXRlTmV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAg
ICAgICBmb3JtCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhY3Rpb24nLCBnZXRVcmwo
c2V0dGluZ3MpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignbWV0aG9kJywgZ2V0TWV0
aG9kKHNldHRpbmdzKSkKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsIGlm
cmFtZS5hdHRyKCduYW1lJykpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdlbmN0eXBl
JywgJ211bHRpcGFydC9mb3JtLWRhdGEnKTsKICAgICAgICAgICAgICAgICAgICBsZWdhY3lVcGxv
YWRGb3JtRGF0YUluaXQoaW5wdXQsIGZvcm0sIHNldHRpbmdzKTsKICAgICAgICAgICAgICAgICAg
ICBpZnJhbWUucmVhZHlTdGF0ZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgZm9ybS5nZXQoMCku
c3VibWl0KCk7CiAgICAgICAgICAgICAgICAgICAgbGVnYWN5VXBsb2FkRm9ybURhdGFSZXNldChp
bnB1dCwgZm9ybSwgc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgICAgICQuZWFjaChvcmlnaW5h
bEF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAg
ICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXR0cihu
YW1lLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZUF0dHIobmFtZSk7CiAgICAgICAgICAgICAgICAg
ICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CiAgICAg
ICAgICAgICAgICBtdWx0aUxvYWRlci5wdXNoKFtmaWxlcywgaW5kZXgsIGlmcmFtZSwgc2V0dGlu
Z3NdKTsKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZXF1ZW50aWFsVXBsb2Fkcykgewog
ICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlSGFuZGxlci5wdXNoKHNlbmQpOwogICAgICAgICAg
ICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZW5kKCk7CiAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBub3JtYWxpemVGaWxlID0gZnVuY3Rpb24g
KGluZGV4LCBmaWxlKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbGUubmFtZSA9PT0g
dW5kZWYgJiYgdHlwZW9mIGZpbGUuc2l6ZSA9PT0gdW5kZWYpIHsKICAgICAgICAgICAgICAgICAg
ICBmaWxlLm5hbWUgPSBmaWxlLmZpbGVOYW1lOwogICAgICAgICAgICAgICAgICAgIGZpbGUuc2l6
ZSA9IGZpbGUuZmlsZVNpemU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAg
ICAgICAgICBoYW5kbGVMZWdhY3lVcGxvYWQgPSBmdW5jdGlvbiAoZXZlbnQsIGlucHV0LCBmb3Jt
LCBpbmRleCkgewogICAgICAgICAgICAgICAgaWYgKCEoZXZlbnQgJiYgaW5wdXQgJiYgZm9ybSkp
IHsKICAgICAgICAgICAgICAgICAgICAkLmVycm9yKCdJZnJhbWUgYmFzZWQgRmlsZSBVcGxvYWQg
cmVxdWlyZXMgYSBmaWxlIGlucHV0IGNoYW5nZSBldmVudCcpOwogICAgICAgICAgICAgICAgICAg
IHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIGphdmFzY3JpcHQ6
ZmFsc2UgYXMgaWZyYW1lIHNyYyBwcmV2ZW50cyB3YXJuaW5nIHBvcHVwcyBvbiBIVFRQUyBpbiBJ
RTY6CiAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gJCgnPGlmcmFtZSBzcmM9ImphdmFzY3Jp
cHQ6ZmFsc2U7IiBzdHlsZT0iZGlzcGxheTpub25lOyIgbmFtZT0iaWZyYW1lXycgKwogICAgICAg
ICAgICAgICAgICAgIHNldHRpbmdzLm5hbWVzcGFjZSArICdfJyArIChuZXcgRGF0ZSgpKS5nZXRU
aW1lKCkgKyAnIj48L2lmcmFtZT4nKSwKICAgICAgICAgICAgICAgICAgICB1cGxvYWRTZXR0aW5n
cyA9ICQuZXh0ZW5kKHt9LCBzZXR0aW5ncyksCiAgICAgICAgICAgICAgICAgICAgZmlsZXMgPSBl
dmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LmZpbGVzOwogICAgICAgICAgICAgICAgZmlsZXMg
PSBmaWxlcyA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZpbGVzLCAwKSA6IFt7bmFtZTog
aW5wdXQudmFsKCksIHR5cGU6IG51bGwsIHNpemU6IG51bGx9XTsKICAgICAgICAgICAgICAgICQu
ZWFjaChmaWxlcywgbm9ybWFsaXplRmlsZSk7CiAgICAgICAgICAgICAgICBpbmRleCA9IGZpbGVz
Lmxlbmd0aCA9PT0gMSA/IDAgOiBpbmRleDsKICAgICAgICAgICAgICAgIHVwbG9hZFNldHRpbmdz
LmZpbGVJbnB1dCA9IGlucHV0OwogICAgICAgICAgICAgICAgdXBsb2FkU2V0dGluZ3MudXBsb2Fk
Rm9ybSA9IGZvcm07CiAgICAgICAgICAgICAgICBpZnJhbWUucmVhZHlTdGF0ZSA9IDA7CiAgICAg
ICAgICAgICAgICBpZnJhbWUuYWJvcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAg
ICAgaWZyYW1lLnRyaWdnZXIoJ2Fib3J0Jyk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAg
ICAgICAgaWZyYW1lLmJpbmQoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAg
ICAgaWZyYW1lLnVuYmluZCgnbG9hZCcpOwogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yg
dXBsb2FkU2V0dGluZ3MuaW5pdFVwbG9hZCA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAg
ICAgICB1cGxvYWRTZXR0aW5ncy5pbml0VXBsb2FkKAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlcywKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGluZGV4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1l
LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkU2V0dGluZ3MsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgbGVnYWN5VXBsb2FkKGV2ZW50LCBmaWxlcywgaW5wdXQsIGZvcm0sIGlmcmFtZSwgdXBs
b2FkU2V0dGluZ3MsIGluZGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg
ICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAg
ICAgICAgICAgICAgICAgICBsZWdhY3lVcGxvYWQoZXZlbnQsIGZpbGVzLCBpbnB1dCwgZm9ybSwg
aWZyYW1lLCB1cGxvYWRTZXR0aW5ncywgaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgICAgIH0pLmFwcGVuZFRvKGZvcm0pOwogICAgICAgICAgICB9LAoKICAgICAgICAg
ICAgY2FuSGFuZGxlWEhSVXBsb2FkU2l6ZSA9IGZ1bmN0aW9uIChmaWxlcykgewogICAgICAgICAg
ICAgICAgdmFyIGJ5dGVzID0gMCwKICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzID0gMCwK
ICAgICAgICAgICAgICAgICAgICBpOwogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm11bHRp
cGFydCAmJiB0eXBlb2YgRm9ybURhdGEgPT09IHVuZGVmKSB7CiAgICAgICAgICAgICAgICAgICAg
Zm9yIChpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAg
ICAgICAgIGJ5dGVzID0gZmlsZXNbaV0uc2l6ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYg
KGJ5dGVzID4gc2V0dGluZ3MubWF4RmlsZVJlYWRlclNpemUpIHsKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzICs9IGJ5dGVzOwogICAgICAgICAgICAgICAgICAg
IH0KICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubXVsdGlGaWxlUmVxdWVzdCAmJiB0
b3RhbEJ5dGVzID4gc2V0dGluZ3MubWF4RmlsZVJlYWRlclNpemUpIHsKICAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9LAoKICAgICAg
ICAgICAgaGFuZGxlRmlsZXMgPSBmdW5jdGlvbiAoZXZlbnQsIGZpbGVzLCBpbnB1dCwgZm9ybSkg
ewogICAgICAgICAgICAgICAgaWYgKCFjYW5IYW5kbGVYSFJVcGxvYWRTaXplKGZpbGVzKSkgewog
ICAgICAgICAgICAgICAgICAgIGhhbmRsZUxlZ2FjeVVwbG9hZChldmVudCwgaW5wdXQsIGZvcm0p
OwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg
ICAgICAgIHZhciBpOwogICAgICAgICAgICAgICAgZmlsZXMgPSBBcnJheS5wcm90b3R5cGUuc2xp
Y2UuY2FsbChmaWxlcywgMCk7CiAgICAgICAgICAgICAgICAkLmVhY2goZmlsZXMsIG5vcm1hbGl6
ZUZpbGUpOwogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm11bHRpRmlsZVJlcXVlc3QgJiYg
c2V0dGluZ3MubXVsdGlwYXJ0ICYmIGZpbGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAg
IGhhbmRsZVVwbG9hZChldmVudCwgZmlsZXMsIGlucHV0LCBmb3JtKTsKICAgICAgICAgICAgICAg
IH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGZpbGVzLmxlbmd0
aDsgaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVVwbG9hZChldmVudCwg
ZmlsZXMsIGlucHV0LCBmb3JtLCBpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIAogICAgICAgICAgICBpbml0VXBsb2Fk
Rm9ybSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHVwbG9hZEZvcm0gPSAoY29udGFp
bmVyLmlzKCdmb3JtJykgPyBjb250YWluZXIgOiBjb250YWluZXIuZmluZCgnZm9ybScpKQogICAg
ICAgICAgICAgICAgICAgIC5maWx0ZXIoc2V0dGluZ3MudXBsb2FkRm9ybUZpbHRlcik7CiAgICAg
ICAgICAgIH0sCiAgICAgICAgICAgIAogICAgICAgICAgICBpbml0RmlsZUlucHV0ID0gZnVuY3Rp
b24gKCkgewogICAgICAgICAgICAgICAgZmlsZUlucHV0ID0gKHVwbG9hZEZvcm0ubGVuZ3RoID8g
dXBsb2FkRm9ybSA6IGNvbnRhaW5lcikuZmluZCgnaW5wdXQ6ZmlsZScpCiAgICAgICAgICAgICAg
ICAgICAgLmZpbHRlcihzZXR0aW5ncy5maWxlSW5wdXRGaWx0ZXIpOwogICAgICAgICAgICB9LAog
ICAgICAgICAgICAKICAgICAgICAgICAgcmVwbGFjZUZpbGVJbnB1dCA9IGZ1bmN0aW9uIChpbnB1
dCkgewogICAgICAgICAgICAgICAgdmFyIGlucHV0Q2xvbmUgPSBpbnB1dC5jbG9uZSh0cnVlKTsK
ICAgICAgICAgICAgICAgICQoJzxmb3JtLz4nKS5hcHBlbmQoaW5wdXRDbG9uZSkuZ2V0KDApLnJl
c2V0KCk7CiAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihpbnB1dENsb25lKS5kZXRhY2goKTsK
ICAgICAgICAgICAgICAgIGluaXRGaWxlSW5wdXQoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAg
dGhpcy5vbkRvY3VtZW50RHJhZ092ZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAo
dHlwZW9mIHNldHRpbmdzLm9uRG9jdW1lbnREcmFnT3ZlciA9PT0gZnVuYyAmJgogICAgICAgICAg
ICAgICAgICAgIHNldHRpbmdzLm9uRG9jdW1lbnREcmFnT3ZlcihlKSA9PT0gZmFsc2UpIHsKICAg
ICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlLnBy
ZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLm9uRG9jdW1l
bnREcm9wID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5v
bkRvY3VtZW50RHJvcCA9PT0gZnVuYyAmJgogICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm9u
RG9jdW1lbnREcm9wKGUpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl
OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9
OwoKICAgICAgICB0aGlzLm9uRHJhZ092ZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBp
ZiAodHlwZW9mIHNldHRpbmdzLm9uRHJhZ092ZXIgPT09IGZ1bmMgJiYKICAgICAgICAgICAgICAg
ICAgICBzZXR0aW5ncy5vbkRyYWdPdmVyKGUpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAg
cmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBkYXRhVHJhbnNmZXIg
PSBlLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyOwogICAgICAgICAgICBpZiAoZGF0YVRyYW5z
ZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcykgewogICAgICAgICAgICAgICAgZGF0YVRyYW5zZmVy
LmRyb3BFZmZlY3QgPSBkYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdjb3B5JzsKICAgICAg
ICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07Cgog
ICAgICAgIHRoaXMub25Ecm9wID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHR5cGVv
ZiBzZXR0aW5ncy5vbkRyb3AgPT09IGZ1bmMgJiYKICAgICAgICAgICAgICAgICAgICBzZXR0aW5n
cy5vbkRyb3AoZSkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg
ICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGRhdGFUcmFuc2ZlciA9IGUub3JpZ2luYWxFdmVu
dC5kYXRhVHJhbnNmZXI7CiAgICAgICAgICAgIGlmIChkYXRhVHJhbnNmZXIgJiYgZGF0YVRyYW5z
ZmVyLmZpbGVzICYmIGlzWEhSVXBsb2FkQ2FwYWJsZSgpKSB7CiAgICAgICAgICAgICAgICBoYW5k
bGVGaWxlcyhlLCBkYXRhVHJhbnNmZXIuZmlsZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAg
IGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMub25D
aGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLm9u
Q2hhbmdlID09PSBmdW5jICYmCiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mub25DaGFuZ2Uo
ZSkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAg
IH0KICAgICAgICAgICAgdmFyIGlucHV0ID0gJChlLnRhcmdldCksCiAgICAgICAgICAgICAgICBm
b3JtID0gJChlLnRhcmdldC5mb3JtKTsKICAgICAgICAgICAgaWYgKGZvcm0ubGVuZ3RoID09PSAx
KSB7CiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MucmVwbGFjZUZpbGVJbnB1dCkgewogICAg
ICAgICAgICAgICAgICAgIGlucHV0LmRhdGEoZGVmYXVsdE5hbWVzcGFjZSArICdfZm9ybScsIGZv
cm0pOwogICAgICAgICAgICAgICAgICAgIHJlcGxhY2VGaWxlSW5wdXQoaW5wdXQpOwogICAgICAg
ICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZm9ybSA9IGlu
cHV0LmRhdGEoZGVmYXVsdE5hbWVzcGFjZSArICdfZm9ybScpOwogICAgICAgICAgICB9CiAgICAg
ICAgICAgIGlmICghc2V0dGluZ3MuZm9yY2VJZnJhbWVVcGxvYWQgJiYgZS50YXJnZXQuZmlsZXMg
JiYgaXNYSFJVcGxvYWRDYXBhYmxlKCkpIHsKICAgICAgICAgICAgICAgIGhhbmRsZUZpbGVzKGUs
IGUudGFyZ2V0LmZpbGVzLCBpbnB1dCwgZm9ybSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg
ICAgICAgICAgICBoYW5kbGVMZWdhY3lVcGxvYWQoZSwgaW5wdXQsIGZvcm0pOwogICAgICAgICAg
ICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsK
ICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHsKICAgICAgICAgICAgICAgICQuZXh0ZW5kKHNldHRp
bmdzLCBvcHRpb25zKTsKICAgICAgICAgICAgICAgIG9wdGlvbnNSZWZlcmVuY2UgPSBvcHRpb25z
OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluaXRVcGxvYWRGb3JtKCk7CiAgICAgICAgICAg
IGluaXRGaWxlSW5wdXQoKTsKICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5kYXRhKHNldHRpbmdz
Lm5hbWVzcGFjZSkpIHsKICAgICAgICAgICAgICAgICQuZXJyb3IoJ0ZpbGVVcGxvYWQgd2l0aCBu
YW1lc3BhY2UgIicgKyBzZXR0aW5ncy5uYW1lc3BhY2UgKyAnIiBhbHJlYWR5IGFzc2lnbmVkIHRv
IHRoaXMgZWxlbWVudCcpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAg
ICAgICAgICAgIGNvbnRhaW5lcgogICAgICAgICAgICAgICAgLmRhdGEoc2V0dGluZ3MubmFtZXNw
YWNlLCBmaWxlVXBsb2FkKQogICAgICAgICAgICAgICAgLmFkZENsYXNzKHNldHRpbmdzLmNzc0Ns
YXNzKTsKICAgICAgICAgICAgc2V0dGluZ3MuZHJvcFpvbmUubm90KGNvbnRhaW5lcikuYWRkQ2xh
c3Moc2V0dGluZ3MuY3NzQ2xhc3MpOwogICAgICAgICAgICBpbml0RXZlbnRIYW5kbGVycygpOwog
ICAgICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLmluaXQgPT09IGZ1bmMpIHsKICAgICAgICAg
ICAgICAgIHNldHRpbmdzLmluaXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAg
IHRoaXMub3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgICAgIHZhciBvbGRD
c3NDbGFzcywKICAgICAgICAgICAgICAgIG9sZERyb3Bab25lLAogICAgICAgICAgICAgICAgdXBs
b2FkRm9ybUZpbHRlclVwZGF0ZSwKICAgICAgICAgICAgICAgIGZpbGVJbnB1dEZpbHRlclVwZGF0
ZTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSB1bmRlZikgewogICAgICAgICAg
ICAgICAgcmV0dXJuICQuZXh0ZW5kKHt9LCBzZXR0aW5ncyk7CiAgICAgICAgICAgIH0KICAgICAg
ICAgICAgaWYgKG9wdGlvbnNSZWZlcmVuY2UpIHsKICAgICAgICAgICAgICAgICQuZXh0ZW5kKG9w
dGlvbnNSZWZlcmVuY2UsIG9wdGlvbnMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbW92
ZUV2ZW50SGFuZGxlcnMoKTsKICAgICAgICAgICAgJC5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uIChu
YW1lLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChuYW1lKSB7CiAgICAgICAgICAg
ICAgICBjYXNlICduYW1lc3BhY2UnOgogICAgICAgICAgICAgICAgICAgICQuZXJyb3IoJ1RoZSBG
aWxlVXBsb2FkIG5hbWVzcGFjZSBjYW5ub3QgYmUgdXBkYXRlZC4nKTsKICAgICAgICAgICAgICAg
ICAgICByZXR1cm47CiAgICAgICAgICAgICAgICBjYXNlICd1cGxvYWRGb3JtRmlsdGVyJzoKICAg
ICAgICAgICAgICAgICAgICB1cGxvYWRGb3JtRmlsdGVyVXBkYXRlID0gdHJ1ZTsKICAgICAgICAg
ICAgICAgICAgICBmaWxlSW5wdXRGaWx0ZXJVcGRhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAg
ICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnZmlsZUlucHV0RmlsdGVyJzoKICAgICAg
ICAgICAgICAgICAgICBmaWxlSW5wdXRGaWx0ZXJVcGRhdGUgPSB0cnVlOwogICAgICAgICAgICAg
ICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnY3NzQ2xhc3MnOgogICAgICAgICAg
ICAgICAgICAgIG9sZENzc0NsYXNzID0gc2V0dGluZ3MuY3NzQ2xhc3M7CiAgICAgICAgICAgICAg
ICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdkcm9wWm9uZSc6CiAgICAgICAgICAg
ICAgICAgICAgb2xkRHJvcFpvbmUgPSBzZXR0aW5ncy5kcm9wWm9uZTsKICAgICAgICAgICAgICAg
ICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNldHRpbmdzW25h
bWVdID0gdmFsdWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAodXBsb2FkRm9ybUZp
bHRlclVwZGF0ZSkgewogICAgICAgICAgICAgICAgaW5pdFVwbG9hZEZvcm0oKTsKICAgICAgICAg
ICAgfQogICAgICAgICAgICBpZiAoZmlsZUlucHV0RmlsdGVyVXBkYXRlKSB7CiAgICAgICAgICAg
ICAgICBpbml0RmlsZUlucHV0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVv
ZiBvbGRDc3NDbGFzcyAhPT0gdW5kZWYpIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lcgogICAg
ICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhvbGRDc3NDbGFzcykKICAgICAgICAgICAgICAg
ICAgICAuYWRkQ2xhc3Moc2V0dGluZ3MuY3NzQ2xhc3MpOwogICAgICAgICAgICAgICAgKG9sZERy
b3Bab25lID8gb2xkRHJvcFpvbmUgOiBzZXR0aW5ncy5kcm9wWm9uZSkubm90KGNvbnRhaW5lcikK
ICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3Mob2xkQ3NzQ2xhc3MpOwogICAgICAgICAg
ICAgICAgc2V0dGluZ3MuZHJvcFpvbmUubm90KGNvbnRhaW5lcikuYWRkQ2xhc3Moc2V0dGluZ3Mu
Y3NzQ2xhc3MpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9sZERyb3Bab25lKSB7CiAgICAgICAg
ICAgICAgICBvbGREcm9wWm9uZS5ub3QoY29udGFpbmVyKS5yZW1vdmVDbGFzcyhzZXR0aW5ncy5j
c3NDbGFzcyk7CiAgICAgICAgICAgICAgICBzZXR0aW5ncy5kcm9wWm9uZS5ub3QoY29udGFpbmVy
KS5hZGRDbGFzcyhzZXR0aW5ncy5jc3NDbGFzcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg
aW5pdEV2ZW50SGFuZGxlcnMoKTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMub3B0
aW9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIHZhciBvcHRpb25zOwog
ICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSB1bmRlZikgewogICAgICAgICAgICAgICAg
cmV0dXJuIHNldHRpbmdzW25hbWVdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wdGlvbnMg
PSB7fTsKICAgICAgICAgICAgb3B0aW9uc1tuYW1lXSA9IHZhbHVlOwogICAgICAgICAgICBmaWxl
VXBsb2FkLm9wdGlvbnMob3B0aW9ucyk7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlz
LmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dGluZ3Mu
ZGVzdHJveSA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgc2V0dGluZ3MuZGVzdHJveSgpOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbW92ZUV2ZW50SGFuZGxlcnMoKTsKICAgICAgICAg
ICAgY29udGFpbmVyCiAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShzZXR0aW5ncy5uYW1lc3Bh
Y2UpCiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3Moc2V0dGluZ3MuY3NzQ2xhc3MpOwogICAg
ICAgICAgICBzZXR0aW5ncy5kcm9wWm9uZS5ub3QoY29udGFpbmVyKS5yZW1vdmVDbGFzcyhzZXR0
aW5ncy5jc3NDbGFzcyk7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLnVwbG9hZCA9
IGZ1bmN0aW9uIChmaWxlcykgewogICAgICAgICAgICBpZiAodHlwZW9mIGZpbGVzLmxlbmd0aCA9
PT0gdW5kZWYpIHsKICAgICAgICAgICAgICAgIGZpbGVzID0gW2ZpbGVzXTsKICAgICAgICAgICAg
fQogICAgICAgICAgICBoYW5kbGVGaWxlcyhudWxsLCBmaWxlcyk7CiAgICAgICAgfTsKICAgIH07
CgogICAgbWV0aG9kcyA9IHsKICAgICAgICBpbml0IDogZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAo
bmV3IEZpbGVVcGxvYWQoJCh0aGlzKSkpLmluaXQob3B0aW9ucyk7CiAgICAgICAgICAgIH0pOwog
ICAgICAgIH0sCiAgICAgICAgCiAgICAgICAgb3B0aW9uOiBmdW5jdGlvbiAob3B0aW9uLCB2YWx1
ZSwgbmFtZXNwYWNlKSB7CiAgICAgICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZSA/IG5hbWVz
cGFjZSA6IGRlZmF1bHROYW1lc3BhY2U7CiAgICAgICAgICAgIHZhciBmaWxlVXBsb2FkID0gJCh0
aGlzKS5kYXRhKG5hbWVzcGFjZSk7CiAgICAgICAgICAgIGlmIChmaWxlVXBsb2FkKSB7CiAgICAg
ICAgICAgICAgICBpZiAoIW9wdGlvbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxl
VXBsb2FkLm9wdGlvbnMoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlv
biA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlID09PSB1bmRlZikgewogICAgICAgICAgICAg
ICAgICAgIHJldHVybiBmaWxlVXBsb2FkLm9wdGlvbihvcHRpb24pOwogICAgICAgICAgICAgICAg
fQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJC5lcnJvcignTm8gRmlsZVVw
bG9hZCB3aXRoIG5hbWVzcGFjZSAiJyArIG5hbWVzcGFjZSArICciIGFzc2lnbmVkIHRvIHRoaXMg
ZWxlbWVudCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVu
Y3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZ1ID0gJCh0aGlzKS5kYXRhKG5hbWVzcGFj
ZSk7CiAgICAgICAgICAgICAgICBpZiAoZnUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlw
ZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnUub3B0
aW9uKG9wdGlvbiwgdmFsdWUpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg
ICAgICAgICAgICAgICAgIGZ1Lm9wdGlvbnMob3B0aW9uKTsKICAgICAgICAgICAgICAgICAgICB9
CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICQuZXJyb3IoJ05v
IEZpbGVVcGxvYWQgd2l0aCBuYW1lc3BhY2UgIicgKyBuYW1lc3BhY2UgKyAnIiBhc3NpZ25lZCB0
byB0aGlzIGVsZW1lbnQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAg
ICAgfSwKICAgICAgICAgICAgICAgIAogICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIChuYW1lc3Bh
Y2UpIHsKICAgICAgICAgICAgbmFtZXNwYWNlID0gbmFtZXNwYWNlID8gbmFtZXNwYWNlIDogZGVm
YXVsdE5hbWVzcGFjZTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7
CiAgICAgICAgICAgICAgICB2YXIgZmlsZVVwbG9hZCA9ICQodGhpcykuZGF0YShuYW1lc3BhY2Up
OwogICAgICAgICAgICAgICAgaWYgKGZpbGVVcGxvYWQpIHsKICAgICAgICAgICAgICAgICAgICBm
aWxlVXBsb2FkLmRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICAgICAgJC5lcnJvcignTm8gRmlsZVVwbG9hZCB3aXRoIG5hbWVzcGFjZSAiJyArIG5hbWVz
cGFjZSArICciIGFzc2lnbmVkIHRvIHRoaXMgZWxlbWVudCcpOwogICAgICAgICAgICAgICAgfQog
ICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIAogICAgICAgIHVwbG9hZDogZnVuY3Rp
b24gKGZpbGVzLCBuYW1lc3BhY2UpIHsKICAgICAgICAgICAgbmFtZXNwYWNlID0gbmFtZXNwYWNl
ID8gbmFtZXNwYWNlIDogZGVmYXVsdE5hbWVzcGFjZTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMu
ZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZmlsZVVwbG9hZCA9ICQodGhp
cykuZGF0YShuYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgaWYgKGZpbGVVcGxvYWQpIHsKICAg
ICAgICAgICAgICAgICAgICBmaWxlVXBsb2FkLnVwbG9hZChmaWxlcyk7CiAgICAgICAgICAgICAg
ICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICQuZXJyb3IoJ05vIEZpbGVVcGxvYWQgd2l0
aCBuYW1lc3BhY2UgIicgKyBuYW1lc3BhY2UgKyAnIiBhc3NpZ25lZCB0byB0aGlzIGVsZW1lbnQn
KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKICAg
IAogICAgJC5mbi5maWxlVXBsb2FkID0gZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgIGlmICht
ZXRob2RzW21ldGhvZF0pIHsKICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBs
eSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAg
ICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHsKICAg
ICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAg
ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICQuZXJyb3IoJ01ldGhvZCAiJyArIG1ldGhvZCArICci
IGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5maWxlVXBsb2FkJyk7CiAgICAgICAgfQogICAgfTsK
ICAgIAp9KGpRdWVyeSkpOwoKCi8qCiAqIGpRdWVyeSBGaWxlIFVwbG9hZCBVc2VyIEludGVyZmFj
ZSBQbHVnaW4gNC40LjEKICogaHR0cHM6Ly9naXRodWIuY29tL2JsdWVpbXAvalF1ZXJ5LUZpbGUt
VXBsb2FkCiAqCiAqIENvcHlyaWdodCAyMDEwLCBTZWJhc3RpYW4gVHNjaGFuCiAqIGh0dHBzOi8v
Ymx1ZWltcC5uZXQKICoKICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOgogKiBodHRw
Oi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9NSVQvCiAqLwoKLypqc2xpbnQgYnJvd3Nl
cjogdHJ1ZSwgdW5wYXJhbTogdHJ1ZSAqLwovKmdsb2JhbCBqUXVlcnksIEZpbGVSZWFkZXIsIFVS
TCwgd2Via2l0VVJMICovCgooZnVuY3Rpb24gKCQpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICB2
YXIgdW5kZWYgPSAndW5kZWZpbmVkJywKICAgICAgICBmdW5jID0gJ2Z1bmN0aW9uJywKICAgICAg
ICBVcGxvYWRIYW5kbGVyLAogICAgICAgIG1ldGhvZHMsCgogICAgICAgIE11bHRpTG9hZGVyID0g
ZnVuY3Rpb24gKGNhbGxCYWNrKSB7CiAgICAgICAgICAgIHZhciBsb2FkZWQgPSAwLAogICAgICAg
ICAgICAgICAgbGlzdCA9IFtdOwogICAgICAgICAgICB0aGlzLmNvbXBsZXRlID0gZnVuY3Rpb24g
KCkgewogICAgICAgICAgICAgICAgbG9hZGVkICs9IDE7CiAgICAgICAgICAgICAgICBpZiAobG9h
ZGVkID09PSBsaXN0Lmxlbmd0aCArIDEpIHsKICAgICAgICAgICAgICAgICAgICAvLyBsaXN0Lmxl
bmd0aCAqIG9uQ29tcGxldGUgKyAxICogb25Mb2FkQWxsCiAgICAgICAgICAgICAgICAgICAgY2Fs
bEJhY2sobGlzdCk7CiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gMDsKICAgICAgICAgICAg
ICAgICAgICBsaXN0ID0gW107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAg
ICAgICAgIHRoaXMucHVzaCA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBsaXN0
LnB1c2goaXRlbSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCA9IGZ1
bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsaXN0OwogICAgICAgICAgICB9Owog
ICAgICAgIH07CiAgICAgICAgCiAgICBVcGxvYWRIYW5kbGVyID0gZnVuY3Rpb24gKGNvbnRhaW5l
ciwgb3B0aW9ucykgewogICAgICAgIHZhciB1cGxvYWRIYW5kbGVyID0gdGhpcywKICAgICAgICAg
ICAgZHJhZ092ZXJUaW1lb3V0LAogICAgICAgICAgICBpc0Ryb3Bab25lRW5sYXJnZWQsCiAgICAg
ICAgICAgIG11bHRpTG9hZGVyID0gbmV3IE11bHRpTG9hZGVyKGZ1bmN0aW9uIChsaXN0KSB7CiAg
ICAgICAgICAgICAgICB1cGxvYWRIYW5kbGVyLmhpZGVQcm9ncmVzc0JhckFsbChmdW5jdGlvbiAo
KSB7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5yZXNldFByb2dyZXNzQmFyQWxs
KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGxvYWRIYW5kbGVyLm9uQ29tcGxl
dGVBbGwgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5v
bkNvbXBsZXRlQWxsKGxpc3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg
IH0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgZ2V0VXBsb2FkVGFibGUgPSBmdW5jdGlv
biAoaGFuZGxlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBoYW5kbGVyLnVwbG9h
ZFRhYmxlID09PSBmdW5jID8KICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLnVwbG9hZFRhYmxl
KGhhbmRsZXIpIDogaGFuZGxlci51cGxvYWRUYWJsZTsKICAgICAgICAgICAgfSwKICAgICAgICAg
ICAgZ2V0RG93bmxvYWRUYWJsZSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7CiAgICAgICAgICAgICAg
ICByZXR1cm4gdHlwZW9mIGhhbmRsZXIuZG93bmxvYWRUYWJsZSA9PT0gZnVuYyA/CiAgICAgICAg
ICAgICAgICAgICAgaGFuZGxlci5kb3dubG9hZFRhYmxlKGhhbmRsZXIpIDogaGFuZGxlci5kb3du
bG9hZFRhYmxlOwogICAgICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMucmVxdWVzdEhl
YWRlcnMgPSB7J0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICov
KjsgcT0wLjAxJ307CiAgICAgICAgdGhpcy5kcm9wWm9uZSA9IGNvbnRhaW5lcjsKICAgICAgICB0
aGlzLmltYWdlVHlwZXMgPSAvXmltYWdlXC8oZ2lmfGpwZWd8cG5nKSQvOwogICAgICAgIHRoaXMu
cHJldmlld01heFdpZHRoID0gdGhpcy5wcmV2aWV3TWF4SGVpZ2h0ID0gODA7CiAgICAgICAgdGhp
cy5wcmV2aWV3TG9hZERlbGF5ID0gMTAwOwogICAgICAgIHRoaXMucHJldmlld0FzQ2FudmFzID0g
dHJ1ZTsKICAgICAgICB0aGlzLnByZXZpZXdTZWxlY3RvciA9ICcuZmlsZV91cGxvYWRfcHJldmll
dyc7CiAgICAgICAgdGhpcy5wcm9ncmVzc1NlbGVjdG9yID0gJy5maWxlX3VwbG9hZF9wcm9ncmVz
cyBkaXYnOwogICAgICAgIHRoaXMuY2FuY2VsU2VsZWN0b3IgPSAnLmZpbGVfdXBsb2FkX2NhbmNl
bCBidXR0b24nOwogICAgICAgIHRoaXMuY3NzQ2xhc3NTbWFsbCA9ICdmaWxlX3VwbG9hZF9zbWFs
bCc7CiAgICAgICAgdGhpcy5jc3NDbGFzc0xhcmdlID0gJ2ZpbGVfdXBsb2FkX2xhcmdlJzsKICAg
ICAgICB0aGlzLmNzc0NsYXNzSGlnaGxpZ2h0ID0gJ2ZpbGVfdXBsb2FkX2hpZ2hsaWdodCc7CiAg
ICAgICAgdGhpcy5kcm9wRWZmZWN0ID0gJ2hpZ2hsaWdodCc7CiAgICAgICAgdGhpcy51cGxvYWRU
YWJsZSA9IHRoaXMuZG93bmxvYWRUYWJsZSA9IG51bGw7CiAgICAgICAgdGhpcy5idWlsZFVwbG9h
ZFJvdyA9IHRoaXMuYnVpbGREb3dubG9hZFJvdyA9IG51bGw7CiAgICAgICAgdGhpcy5wcm9ncmVz
c0FsbE5vZGUgPSBudWxsOwoKICAgICAgICB0aGlzLmxvYWRJbWFnZSA9IGZ1bmN0aW9uIChmaWxl
LCBjYWxsQmFjaywgbWF4V2lkdGgsIG1heEhlaWdodCwgaW1hZ2VUeXBlcywgbm9DYW52YXMpIHsK
ICAgICAgICAgICAgdmFyIGltZywKICAgICAgICAgICAgICAgIHNjYWxlSW1hZ2UsCiAgICAgICAg
ICAgICAgICB1cmxBUEksCiAgICAgICAgICAgICAgICBmaWxlUmVhZGVyOwogICAgICAgICAgICBp
ZiAoaW1hZ2VUeXBlcyAmJiAhaW1hZ2VUeXBlcy50ZXN0KGZpbGUudHlwZSkpIHsKICAgICAgICAg
ICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNjYWxlSW1hZ2Ug
PSBmdW5jdGlvbiAoaW1nKSB7CiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQu
Y3JlYXRlRWxlbWVudCgnY2FudmFzJyksCiAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBNYXRo
Lm1pbigKICAgICAgICAgICAgICAgICAgICAgICAgKG1heFdpZHRoIHx8IGltZy53aWR0aCkgLyBp
bWcud2lkdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIChtYXhIZWlnaHQgfHwgaW1nLmhlaWdo
dCkgLyBpbWcuaGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlm
IChzY2FsZSA+IDEpIHsKICAgICAgICAgICAgICAgICAgICBzY2FsZSA9IDE7CiAgICAgICAgICAg
ICAgICB9CiAgICAgICAgICAgICAgICBpbWcud2lkdGggPSBwYXJzZUludChpbWcud2lkdGggKiBz
Y2FsZSwgMTApOwogICAgICAgICAgICAgICAgaW1nLmhlaWdodCA9IHBhcnNlSW50KGltZy5oZWln
aHQgKiBzY2FsZSwgMTApOwogICAgICAgICAgICAgICAgaWYgKG5vQ2FudmFzIHx8IHR5cGVvZiBj
YW52YXMuZ2V0Q29udGV4dCAhPT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBp
bWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWcu
d2lkdGg7CiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKICAgICAg
ICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLmRyYXdJbWFnZShpbWcsIDAsIDAsIGlt
Zy53aWR0aCwgaW1nLmhlaWdodCk7CiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzOwogICAg
ICAgICAgICB9OwogICAgICAgICAgICBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcn
KTsKICAgICAgICAgICAgdXJsQVBJID0gdHlwZW9mIFVSTCAhPT0gdW5kZWYgPyBVUkwgOiB0eXBl
b2Ygd2Via2l0VVJMICE9PSB1bmRlZiA/IHdlYmtpdFVSTCA6IG51bGw7CiAgICAgICAgICAgIGlm
ICh1cmxBUEkgJiYgdHlwZW9mIHVybEFQSS5jcmVhdGVPYmplY3RVUkwgPT09IGZ1bmMpIHsKICAg
ICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAg
ICAgdXJsQVBJLnJldm9rZU9iamVjdFVSTCh0aGlzLnNyYyk7CiAgICAgICAgICAgICAgICAgICAg
Y2FsbEJhY2soc2NhbGVJbWFnZShpbWcpKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAg
ICAgICBpbWcuc3JjID0gdXJsQVBJLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgICAgICAg
fSBlbHNlIGlmICh0eXBlb2YgRmlsZVJlYWRlciAhPT0gdW5kZWYgJiYKICAgICAgICAgICAgICAg
ICAgICB0eXBlb2YgRmlsZVJlYWRlci5wcm90b3R5cGUucmVhZEFzRGF0YVVSTCA9PT0gZnVuYykg
ewogICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAg
ICAgICAgICBjYWxsQmFjayhzY2FsZUltYWdlKGltZykpOwogICAgICAgICAgICAgICAgfTsKICAg
ICAgICAgICAgICAgIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAg
ICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAg
IGltZy5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAg
ICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgICB9IGVsc2Ug
ewogICAgICAgICAgICAgICAgY2FsbEJhY2sobnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9
OwoKICAgICAgICB0aGlzLmFkZE5vZGUgPSBmdW5jdGlvbiAocGFyZW50Tm9kZSwgbm9kZSwgY2Fs
bEJhY2spIHsKICAgICAgICAgICAgaWYgKHBhcmVudE5vZGUgJiYgcGFyZW50Tm9kZS5sZW5ndGgg
JiYgbm9kZSAmJiBub2RlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbm9kZS5jc3MoJ2Rpc3Bs
YXknLCAnbm9uZScpLmFwcGVuZFRvKHBhcmVudE5vZGUpLmZhZGVJbihmdW5jdGlvbiAoKSB7CiAg
ICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsQmFjayA9PT0gZnVuYykgewogICAgICAg
ICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJh
Y2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLy8gRml4IGVuZGxlc3MgZXhjZXB0aW9uIGxvb3A6CiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBub2RlLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHRocm93IGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9
CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbEJh
Y2sgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgIGNhbGxCYWNrKCk7CiAgICAgICAgICAgIH0K
ICAgICAgICB9OwoKICAgICAgICB0aGlzLnJlbW92ZU5vZGUgPSBmdW5jdGlvbiAobm9kZSwgY2Fs
bEJhY2spIHsKICAgICAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS5sZW5ndGgpIHsKICAgICAgICAg
ICAgICAgIG5vZGUuZmFkZU91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbm9k
ZS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxCYWNrID09PSBm
dW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBjYWxsQmFjaygpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZW5kbGVzcyBleGNlcHRpb24gbG9v
cDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc3RvcCgpOwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYg
KHR5cGVvZiBjYWxsQmFjayA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgY2FsbEJhY2soKTsK
ICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5yZXBsYWNlTm9k
ZSA9IGZ1bmN0aW9uIChvbGROb2RlLCBuZXdOb2RlLCBjYWxsQmFjaykgewogICAgICAgICAgICBp
ZiAoIShuZXdOb2RlICYmIG5ld05vZGUubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgcmV0dXJu
IHVwbG9hZEhhbmRsZXIucmVtb3ZlTm9kZShvbGROb2RlLCBjYWxsQmFjayk7CiAgICAgICAgICAg
IH0KICAgICAgICAgICAgaWYgKG9sZE5vZGUgJiYgb2xkTm9kZS5sZW5ndGgpIHsKICAgICAgICAg
ICAgICAgIG9sZE5vZGUuZmFkZU91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAg
bmV3Tm9kZS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpOwogICAgICAgICAgICAgICAgICAgIG9sZE5v
ZGUucmVwbGFjZVdpdGgobmV3Tm9kZSk7CiAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZS5mYWRl
SW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxC
YWNrID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxCYWNrKCk7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g
Rml4IGVuZGxlc3MgZXhjZXB0aW9uIGxvb3A6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgb2xkTm9kZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Tm9k
ZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg
ICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBp
ZiAodHlwZW9mIGNhbGxCYWNrID09PSBmdW5jKSB7CiAgICAgICAgICAgICAgICBjYWxsQmFjaygp
OwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5yZXNldFByb2dyZXNzQmFy
QWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodXBsb2FkSGFuZGxlci5wcm9ncmVz
c2JhckFsbCkgewogICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5wcm9ncmVzc2JhckFsbC5w
cm9ncmVzc2JhcigKICAgICAgICAgICAgICAgICAgICAndmFsdWUnLAogICAgICAgICAgICAgICAg
ICAgIDAKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAg
ICB0aGlzLmhpZGVQcm9ncmVzc0JhckFsbCA9IGZ1bmN0aW9uIChjYWxsQmFjaykgewogICAgICAg
ICAgICBpZiAodXBsb2FkSGFuZGxlci5wcm9ncmVzc2JhckFsbCAmJiAhJChnZXRVcGxvYWRUYWJs
ZSh1cGxvYWRIYW5kbGVyKSkKICAgICAgICAgICAgICAgICAgICAuZmluZCh1cGxvYWRIYW5kbGVy
LnByb2dyZXNzU2VsZWN0b3IgKyAnOnZpc2libGU6Zmlyc3QnKS5sZW5ndGgpIHsKICAgICAgICAg
ICAgICAgIHVwbG9hZEhhbmRsZXIucHJvZ3Jlc3NiYXJBbGwuZmFkZU91dChjYWxsQmFjayk7CiAg
ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNhbGxCYWNrID09PSBmdW5jKSB7CiAgICAgICAg
ICAgICAgICBjYWxsQmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhp
cy5vbkFib3J0ID0gZnVuY3Rpb24gKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxlcikg
ewogICAgICAgICAgICBoYW5kbGVyLnJlbW92ZU5vZGUoaGFuZGxlci51cGxvYWRSb3csIGhhbmRs
ZXIuaGlkZVByb2dyZXNzQmFyQWxsKTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMu
Y2FuY2VsVXBsb2FkID0gZnVuY3Rpb24gKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxl
cikgewogICAgICAgICAgICB2YXIgcmVhZHlTdGF0ZSA9IHhoci5yZWFkeVN0YXRlOwogICAgICAg
ICAgICB4aHIuYWJvcnQoKTsKICAgICAgICAgICAgLy8gSWYgcmVhZHlTdGF0ZSBpcyBiZWxvdyAy
LCBhYm9ydCgpIGhhcyBubyBlZmZlY3Q6CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhZHlTdGF0
ZSAhPT0gJ251bWJlcicgfHwgcmVhZHlTdGF0ZSA8IDIpIHsKICAgICAgICAgICAgICAgIGhhbmRs
ZXIub25BYm9ydChldmVudCwgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIpOwogICAgICAgICAg
ICB9CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLmluaXRQcm9ncmVzc0JhciA9IGZ1
bmN0aW9uIChub2RlLCB2YWx1ZSkgewogICAgICAgICAgICBpZiAoIW5vZGUgfHwgIW5vZGUubGVu
Z3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAg
ICAgICBpZiAodHlwZW9mIG5vZGUucHJvZ3Jlc3NiYXIgPT09IGZ1bmMpIHsKICAgICAgICAgICAg
ICAgIHJldHVybiBub2RlLnByb2dyZXNzYmFyKHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTog
dmFsdWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg
ICAgICAgbm9kZS5hZGRDbGFzcygncHJvZ3Jlc3NiYXInKQogICAgICAgICAgICAgICAgICAgIC5h
cHBlbmQoJCgnPGRpdi8+JykuY3NzKCd3aWR0aCcsIHZhbHVlICsgJyUnKSkKICAgICAgICAgICAg
ICAgICAgICAucHJvZ3Jlc3NiYXIgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewogICAgICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdkZXN0cm95JykgewogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3Byb2dyZXNzYmFyJykuZW1wdHko
KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmNzcygnd2lkdGgnLCB2YWx1ZSArICcl
Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg
IH0pOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsK
ICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5kZXN0cm95UHJv
Z3Jlc3NCYXIgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICBpZiAoIW5vZGUgfHwgIW5v
ZGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQog
ICAgICAgICAgICByZXR1cm4gbm9kZS5wcm9ncmVzc2JhcignZGVzdHJveScpOwogICAgICAgIH07
CiAgICAgICAgCiAgICAgICAgdGhpcy5pbml0VXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoeGhy
LCBoYW5kbGVyKSB7CiAgICAgICAgICAgIGlmICgheGhyLnVwbG9hZCAmJiBoYW5kbGVyLnByb2dy
ZXNzYmFyKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVyLnByb2dyZXNzYmFyLnByb2dyZXNzYmFy
KAogICAgICAgICAgICAgICAgICAgICd2YWx1ZScsCiAgICAgICAgICAgICAgICAgICAgMTAwIC8v
IGluZGV0ZXJtaW5hdGUgcHJvZ3Jlc3MgZGlzcGxheWVkIGJ5IGEgZnVsbCBhbmltYXRlZCBwcm9n
cmVzcyBiYXIKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAg
ICAgICB0aGlzLmluaXRVcGxvYWRQcm9ncmVzc0FsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAg
ICAgaWYgKHVwbG9hZEhhbmRsZXIucHJvZ3Jlc3NiYXJBbGwgJiYgdXBsb2FkSGFuZGxlci5wcm9n
cmVzc2JhckFsbC5pcygnOmhpZGRlbicpKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRIYW5kbGVy
LnByb2dyZXNzYmFyQWxsLmZhZGVJbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAg
ICAgdGhpcy5vblNlbmQgPSBmdW5jdGlvbiAoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5k
bGVyKSB7CiAgICAgICAgICAgIGhhbmRsZXIuaW5pdFVwbG9hZFByb2dyZXNzKHhociwgaGFuZGxl
cik7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5vblByb2dyZXNzID0gZnVuY3Rpb24gKGV2ZW50
LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxlcikgewogICAgICAgICAgICBpZiAoaGFuZGxlci5w
cm9ncmVzc2JhciAmJiBldmVudC5sZW5ndGhDb21wdXRhYmxlKSB7CiAgICAgICAgICAgICAgICBo
YW5kbGVyLnByb2dyZXNzYmFyLnByb2dyZXNzYmFyKAogICAgICAgICAgICAgICAgICAgICd2YWx1
ZScsCiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQubG9hZGVkIC8gZXZlbnQudG90
YWwgKiAxMDAsIDEwKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH07
CgogICAgICAgIHRoaXMub25Qcm9ncmVzc0FsbCA9IGZ1bmN0aW9uIChldmVudCwgbGlzdCkgewog
ICAgICAgICAgICBpZiAodXBsb2FkSGFuZGxlci5wcm9ncmVzc2JhckFsbCAmJiBldmVudC5sZW5n
dGhDb21wdXRhYmxlKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRIYW5kbGVyLnByb2dyZXNzYmFy
QWxsLnByb2dyZXNzYmFyKAogICAgICAgICAgICAgICAgICAgICd2YWx1ZScsCiAgICAgICAgICAg
ICAgICAgICAgcGFyc2VJbnQoZXZlbnQubG9hZGVkIC8gZXZlbnQudG90YWwgKiAxMDAsIDEwKQog
ICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHRoaXMu
b25Mb2FkQWxsID0gZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgbXVsdGlMb2FkZXIuY29t
cGxldGUoKTsKICAgICAgICB9OwoKICAgICAgICB0aGlzLmluaXRQcm9ncmVzc0JhckFsbCA9IGZ1
bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCF1cGxvYWRIYW5kbGVyLnByb2dyZXNzYmFyQWxs
KSB7CiAgICAgICAgICAgICAgICB1cGxvYWRIYW5kbGVyLnByb2dyZXNzYmFyQWxsID0gdXBsb2Fk
SGFuZGxlci5pbml0UHJvZ3Jlc3NCYXIoCiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiB1cGxv
YWRIYW5kbGVyLnByb2dyZXNzQWxsTm9kZSA9PT0gZnVuYyA/CiAgICAgICAgICAgICAgICAgICAg
dXBsb2FkSGFuZGxlci5wcm9ncmVzc0FsbE5vZGUodXBsb2FkSGFuZGxlcikgOiB1cGxvYWRIYW5k
bGVyLnByb2dyZXNzQWxsTm9kZSksCiAgICAgICAgICAgICAgICAgICAgMAogICAgICAgICAgICAg
ICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5kZXN0
cm95UHJvZ3Jlc3NCYXJBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHVwbG9hZEhhbmRs
ZXIuZGVzdHJveVByb2dyZXNzQmFyKHVwbG9hZEhhbmRsZXIucHJvZ3Jlc3NiYXJBbGwpOwogICAg
ICAgIH07CgogICAgICAgIHRoaXMubG9hZFByZXZpZXdJbWFnZSA9IGZ1bmN0aW9uIChmaWxlcywg
aW5kZXgsIGhhbmRsZXIpIHsKICAgICAgICAgICAgaW5kZXggPSBpbmRleCB8fCAwOwogICAgICAg
ICAgICBoYW5kbGVyLnVwbG9hZFJvdy5maW5kKGhhbmRsZXIucHJldmlld1NlbGVjdG9yKS5lYWNo
KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBwcmV2aWV3Tm9kZSA9ICQodGhpcyks
CiAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGZpbGVzW2luZGV4XTsKICAgICAgICAgICAgICAg
IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIubG9h
ZEltYWdlKAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlLAogICAgICAgICAgICAgICAgICAg
ICAgICBmdW5jdGlvbiAoaW1nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVy
LmFkZE5vZGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld05vZGUsCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChpbWcpCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAg
ICAgICBoYW5kbGVyLnByZXZpZXdNYXhXaWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgaGFu
ZGxlci5wcmV2aWV3TWF4SGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmlt
YWdlVHlwZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICFoYW5kbGVyLnByZXZpZXdBc0NhbnZh
cwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9LCBoYW5kbGVyLnByZXZp
ZXdMb2FkRGVsYXkpOwogICAgICAgICAgICAgICAgaW5kZXggKz0gMTsKICAgICAgICAgICAgfSk7
CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5pbml0VXBsb2FkUm93ID0gZnVuY3Rpb24gKGV2ZW50
LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxlcikgewogICAgICAgICAgICB2YXIgdXBsb2FkUm93
ID0gaGFuZGxlci51cGxvYWRSb3cgPSAodHlwZW9mIGhhbmRsZXIuYnVpbGRVcGxvYWRSb3cgPT09
IGZ1bmMgPwogICAgICAgICAgICAgICAgaGFuZGxlci5idWlsZFVwbG9hZFJvdyhmaWxlcywgaW5k
ZXgsIGhhbmRsZXIpIDogbnVsbCk7CiAgICAgICAgICAgIGlmICh1cGxvYWRSb3cpIHsKICAgICAg
ICAgICAgICAgIGhhbmRsZXIucHJvZ3Jlc3NiYXIgPSBoYW5kbGVyLmluaXRQcm9ncmVzc0JhcigK
ICAgICAgICAgICAgICAgICAgICB1cGxvYWRSb3cuZmluZChoYW5kbGVyLnByb2dyZXNzU2VsZWN0
b3IpLAogICAgICAgICAgICAgICAgICAgIDAKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAg
ICAgICB1cGxvYWRSb3cuZmluZChoYW5kbGVyLmNhbmNlbFNlbGVjdG9yKS5jbGljayhmdW5jdGlv
biAoZSkgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuY2FuY2VsVXBsb2FkKGUsIGZpbGVz
LCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZh
dWx0KCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGhhbmRsZXIubG9hZFBy
ZXZpZXdJbWFnZShmaWxlcywgaW5kZXgsIGhhbmRsZXIpOwogICAgICAgICAgICB9CiAgICAgICAg
fTsKICAgICAgICAKICAgICAgICB0aGlzLmluaXRVcGxvYWQgPSBmdW5jdGlvbiAoZXZlbnQsIGZp
bGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyLCBjYWxsQmFjaykgewogICAgICAgICAgICBoYW5kbGVy
LmluaXRVcGxvYWRSb3coZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAg
ICAgICAgaGFuZGxlci5hZGROb2RlKAogICAgICAgICAgICAgICAgZ2V0VXBsb2FkVGFibGUoaGFu
ZGxlciksCiAgICAgICAgICAgICAgICBoYW5kbGVyLnVwbG9hZFJvdywKICAgICAgICAgICAgICAg
IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIuYmVm
b3JlU2VuZCA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmJlZm9y
ZVNlbmQoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyLCBjYWxsQmFjayk7CiAgICAg
ICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2so
KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7
CiAgICAgICAgICAgIGhhbmRsZXIuaW5pdFVwbG9hZFByb2dyZXNzQWxsKCk7CiAgICAgICAgfTsK
ICAgICAgICAKICAgICAgICB0aGlzLnBhcnNlUmVzcG9uc2UgPSBmdW5jdGlvbiAoeGhyLCBoYW5k
bGVyKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gdW5kZWYp
IHsKICAgICAgICAgICAgICAgIHJldHVybiAkLnBhcnNlSlNPTih4aHIucmVzcG9uc2VUZXh0KTsK
ICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEluc3RlYWQgb2YgYW4gWEhS
IG9iamVjdCwgYW4gaWZyYW1lIGlzIHVzZWQgZm9yIGxlZ2FjeSBicm93c2VyczoKICAgICAgICAg
ICAgICAgIHJldHVybiAkLnBhcnNlSlNPTih4aHIuY29udGVudHMoKS50ZXh0KCkpOwogICAgICAg
ICAgICB9CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLmluaXREb3dubG9hZFJvdyA9
IGZ1bmN0aW9uIChldmVudCwgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIpIHsKICAgICAgICAg
ICAgdmFyIGpzb24sIGRvd25sb2FkUm93OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg
ICAganNvbiA9IGhhbmRsZXIucmVzcG9uc2UgPSBoYW5kbGVyLnBhcnNlUmVzcG9uc2UoeGhyLCBo
YW5kbGVyKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgaWYgKHR5
cGVvZiBoYW5kbGVyLm9uRXJyb3IgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICBoYW5k
bGVyLm9yaWdpbmFsRXZlbnQgPSBldmVudDsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLm9u
RXJyb3IoZSwgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIpOwogICAgICAgICAgICAgICAgfSBl
bHNlIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAg
ICAgICAgICB9CiAgICAgICAgICAgIGRvd25sb2FkUm93ID0gaGFuZGxlci5kb3dubG9hZFJvdyA9
ICh0eXBlb2YgaGFuZGxlci5idWlsZERvd25sb2FkUm93ID09PSBmdW5jID8KICAgICAgICAgICAg
ICAgIGhhbmRsZXIuYnVpbGREb3dubG9hZFJvdyhqc29uLCBoYW5kbGVyKSA6IG51bGwpOwogICAg
ICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5vbkxvYWQgPSBmdW5jdGlvbiAoZXZlbnQsIGZp
bGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKSB7CiAgICAgICAgICAgIHZhciB1cGxvYWRUYWJsZSA9
IGdldFVwbG9hZFRhYmxlKGhhbmRsZXIpLAogICAgICAgICAgICAgICAgZG93bmxvYWRUYWJsZSA9
IGdldERvd25sb2FkVGFibGUoaGFuZGxlciksCiAgICAgICAgICAgICAgICBjYWxsQmFjayA9IGZ1
bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIub25Db21w
bGV0ZSA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLm9uQ29tcGxl
dGUoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgICAgICAgICAgbXVsdGlMb2FkZXIuY29tcGxldGUoKTsKICAgICAgICAg
ICAgICAgIH07CiAgICAgICAgICAgIG11bHRpTG9hZGVyLnB1c2goQXJyYXkucHJvdG90eXBlLnNs
aWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICAgICAgICAgIGhhbmRsZXIuaW5pdERvd25sb2Fk
Um93KGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxlcik7CiAgICAgICAgICAgIGlmICh1
cGxvYWRUYWJsZSAmJiBoYW5kbGVyLnVwbG9hZFJvdyAmJiBoYW5kbGVyLnVwbG9hZFJvdy5sZW5n
dGggJiYKICAgICAgICAgICAgICAgICAgICAoIWRvd25sb2FkVGFibGUgfHwgdXBsb2FkVGFibGUu
Z2V0KDApID09PSBkb3dubG9hZFRhYmxlLmdldCgwKSkpIHsKICAgICAgICAgICAgICAgIGhhbmRs
ZXIucmVwbGFjZU5vZGUoaGFuZGxlci51cGxvYWRSb3csIGhhbmRsZXIuZG93bmxvYWRSb3csIGNh
bGxCYWNrKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhhbmRsZXIucmVt
b3ZlTm9kZShoYW5kbGVyLnVwbG9hZFJvdywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAg
ICAgIGhhbmRsZXIuYWRkTm9kZSgKICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRUYWJs
ZSwKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5kb3dubG9hZFJvdywKICAgICAgICAg
ICAgICAgICAgICAgICAgY2FsbEJhY2sKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAg
ICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB0aGlzLmRyb3Bab25l
RW5sYXJnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCFpc0Ryb3Bab25lRW5sYXJn
ZWQpIHsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBsb2FkSGFuZGxlci5kcm9wWm9uZS5z
d2l0Y2hDbGFzcyA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIu
ZHJvcFpvbmUuc3dpdGNoQ2xhc3MoCiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZEhhbmRs
ZXIuY3NzQ2xhc3NTbWFsbCwKICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5j
c3NDbGFzc0xhcmdlCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0gZWxz
ZSB7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kcm9wWm9uZS5hZGRDbGFzcyh1
cGxvYWRIYW5kbGVyLmNzc0NsYXNzTGFyZ2UpOwogICAgICAgICAgICAgICAgICAgIHVwbG9hZEhh
bmRsZXIuZHJvcFpvbmUucmVtb3ZlQ2xhc3ModXBsb2FkSGFuZGxlci5jc3NDbGFzc1NtYWxsKTsK
ICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlzRHJvcFpvbmVFbmxhcmdlZCA9IHRy
dWU7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMuZHJvcFpv
bmVSZWR1Y2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBsb2FkSGFu
ZGxlci5kcm9wWm9uZS5zd2l0Y2hDbGFzcyA9PT0gZnVuYykgewogICAgICAgICAgICAgICAgdXBs
b2FkSGFuZGxlci5kcm9wWm9uZS5zd2l0Y2hDbGFzcygKICAgICAgICAgICAgICAgICAgICB1cGxv
YWRIYW5kbGVyLmNzc0NsYXNzTGFyZ2UsCiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxl
ci5jc3NDbGFzc1NtYWxsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2Ugewog
ICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kcm9wWm9uZS5hZGRDbGFzcyh1cGxvYWRIYW5k
bGVyLmNzc0NsYXNzU21hbGwpOwogICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kcm9wWm9u
ZS5yZW1vdmVDbGFzcyh1cGxvYWRIYW5kbGVyLmNzc0NsYXNzTGFyZ2UpOwogICAgICAgICAgICB9
CiAgICAgICAgICAgIGlzRHJvcFpvbmVFbmxhcmdlZCA9IGZhbHNlOwogICAgICAgIH07CgogICAg
ICAgIHRoaXMub25Eb2N1bWVudERyYWdFbnRlciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAg
ICAgICB1cGxvYWRIYW5kbGVyLmRyb3Bab25lRW5sYXJnZSgpOwogICAgICAgIH07CiAgICAgICAg
CiAgICAgICAgdGhpcy5vbkRvY3VtZW50RHJhZ092ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAg
ICAgICAgICAgaWYgKGRyYWdPdmVyVGltZW91dCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1l
b3V0KGRyYWdPdmVyVGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHJhZ092ZXJU
aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRI
YW5kbGVyLmRyb3Bab25lUmVkdWNlKCk7CiAgICAgICAgICAgIH0sIDIwMCk7CiAgICAgICAgfTsK
ICAgICAgICAKICAgICAgICB0aGlzLm9uRHJhZ0VudGVyID0gdGhpcy5vbkRyYWdMZWF2ZSA9IGZ1
bmN0aW9uIChldmVudCkgewogICAgICAgICAgICB1cGxvYWRIYW5kbGVyLmRyb3Bab25lLnRvZ2ds
ZUNsYXNzKHVwbG9hZEhhbmRsZXIuY3NzQ2xhc3NIaWdobGlnaHQpOwogICAgICAgIH07CiAgICAg
ICAgCiAgICAgICAgdGhpcy5vbkRyb3AgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAg
aWYgKGRyYWdPdmVyVGltZW91dCkgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRyYWdP
dmVyVGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHVwbG9hZEhhbmRsZXIu
ZHJvcEVmZmVjdCAmJiB0eXBlb2YgdXBsb2FkSGFuZGxlci5kcm9wWm9uZS5lZmZlY3QgPT09IGZ1
bmMpIHsKICAgICAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIuZHJvcFpvbmUuZWZmZWN0KHVwbG9h
ZEhhbmRsZXIuZHJvcEVmZmVjdCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHVw
bG9hZEhhbmRsZXIuZHJvcFpvbmUucmVtb3ZlQ2xhc3ModXBsb2FkSGFuZGxlci5jc3NDbGFzc0hp
Z2hsaWdodCk7CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kcm9wWm9uZVJlZHVj
ZSgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICB1cGxvYWRIYW5kbGVyLmRyb3Bab25lLnJlbW92ZUNsYXNzKHVwbG9hZEhhbmRsZXIuY3Nz
Q2xhc3NIaWdobGlnaHQpOwogICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kcm9wWm9uZVJl
ZHVjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5pbml0ID0gZnVu
Y3Rpb24gKCkgewogICAgICAgICAgICB1cGxvYWRIYW5kbGVyLmluaXRQcm9ncmVzc0JhckFsbCgp
OwogICAgICAgICAgICBpZiAodHlwZW9mIHVwbG9hZEhhbmRsZXIuaW5pdEV4dGVuZGVkID09PSBm
dW5jKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRIYW5kbGVyLmluaXRFeHRlbmRlZCgpOwogICAg
ICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5j
dGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBsb2FkSGFuZGxlci5kZXN0cm95RXh0
ZW5kZWQgPT09IGZ1bmMpIHsKICAgICAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIuZGVzdHJveUV4
dGVuZGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kZXN0cm95
UHJvZ3Jlc3NCYXJBbGwoKTsKICAgICAgICB9OwoKICAgICAgICAkLmV4dGVuZCh0aGlzLCBvcHRp
b25zKTsKICAgIH07CgogICAgbWV0aG9kcyA9IHsKICAgICAgICBpbml0IDogZnVuY3Rpb24gKG9w
dGlvbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAg
ICAgICAgICAgICAkKHRoaXMpLmZpbGVVcGxvYWQobmV3IFVwbG9hZEhhbmRsZXIoJCh0aGlzKSwg
b3B0aW9ucykpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIAogICAgICAgIG9w
dGlvbjogZnVuY3Rpb24gKG9wdGlvbiwgdmFsdWUsIG5hbWVzcGFjZSkgewogICAgICAgICAgICBp
ZiAoIW9wdGlvbiB8fCAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVl
ID09PSB1bmRlZikpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmZpbGVVcGxvYWQo
J29wdGlvbicsIG9wdGlvbiwgdmFsdWUsIG5hbWVzcGFjZSk7CiAgICAgICAgICAgIH0KICAgICAg
ICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKHRo
aXMpLmZpbGVVcGxvYWQoJ29wdGlvbicsIG9wdGlvbiwgdmFsdWUsIG5hbWVzcGFjZSk7CiAgICAg
ICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgICAgIAogICAgICAgIGRlc3Ryb3kgOiBmdW5j
dGlvbiAobmFtZXNwYWNlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24g
KCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5maWxlVXBsb2FkKCdkZXN0cm95JywgbmFtZXNw
YWNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICAKICAgICAgICB1cGxvYWQ6
IGZ1bmN0aW9uIChmaWxlcywgbmFtZXNwYWNlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmVh
Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5maWxlVXBsb2FkKCd1cGxv
YWQnLCBmaWxlcywgbmFtZXNwYWNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsK
ICAgIAogICAgJC5mbi5maWxlVXBsb2FkVUkgPSBmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAg
aWYgKG1ldGhvZHNbbWV0aG9kXSkgewogICAgICAgICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2Rd
LmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpOwog
ICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkg
ewogICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7
CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICInICsgbWV0aG9k
ICsgJyIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LmZpbGVVcGxvYWRVSScpOwogICAgICAgIH0K
ICAgIH07CiAgICAKfShqUXVlcnkpKTsKCgovKgogKiBqUXVlcnkgRmlsZSBVcGxvYWQgVXNlciBJ
bnRlcmZhY2UgRXh0ZW5kZWQgUGx1Z2luIDQuNgogKiBodHRwczovL2dpdGh1Yi5jb20vYmx1ZWlt
cC9qUXVlcnktRmlsZS1VcGxvYWQKICoKICogQ29weXJpZ2h0IDIwMTAsIFNlYmFzdGlhbiBUc2No
YW4KICogaHR0cHM6Ly9ibHVlaW1wLm5ldAogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxp
Y2Vuc2U6CiAqIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL01JVC8KICovCgov
KmpzbGludCByZWdleHA6IGZhbHNlLCB1bnBhcmFtOiB0cnVlICovCi8qZ2xvYmFsIGpRdWVyeSAq
LwoKKGZ1bmN0aW9uICgkKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgdmFyIFVwbG9hZEhhbmRs
ZXIsCiAgICAgICAgbWV0aG9kczsKCiAgICAvLyBFbXVsYXRlIGpRdWVyeSBVSSBidXR0b24gKHdp
dGhvdXQgc3RhdGVzKSBpZiBub3QgYXZhaWxhYmxlOgogICAgaWYgKHR5cGVvZiAkKCkuYnV0dG9u
ICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJC5mbi5idXR0b24gPSBmdW5jdGlvbiAob3B0aW9u
cykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAg
ICAgICAgIGlmIChvcHRpb25zID09PSAnZGVzdHJveScpIHsKICAgICAgICAgICAgICAgICAgICAk
KHRoaXMpLnJlbW92ZUNsYXNzKAogICAgICAgICAgICAgICAgICAgICAgICAndWktYnV0dG9uIHVp
LXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwnICsKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICcgdWktYnV0dG9uLWljb24tb25seSB1aS1idXR0b24tdGV4dC1pY29uLXBy
aW1hcnknCiAgICAgICAgICAgICAgICAgICAgKS5odG1sKCQodGhpcykudGV4dCgpKTsKICAgICAg
ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKQogICAgICAgICAg
ICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3VpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVm
YXVsdCB1aS1jb3JuZXItYWxsJykKICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ID09PSBmYWxzZSA/ICd1aS1i
dXR0b24taWNvbi1vbmx5JyA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3VpLWJ1
dHRvbi10ZXh0LWljb24tcHJpbWFyeScKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAg
ICAgICAgICAgICAgICAgICAuaHRtbCgkKCc8c3BhbiBjbGFzcz0idWktYnV0dG9uLXRleHQiLz4n
KS50ZXh0KCQodGhpcykudGV4dCgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgLnByZXBlbmQo
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8c3BhbiBjbGFzcz0idWktYnV0dG9uLWlj
b24tcHJpbWFyeSB1aS1pY29uIi8+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAu
YWRkQ2xhc3Mob3B0aW9ucy5pY29ucy5wcmltYXJ5KQogICAgICAgICAgICAgICAgICAgICAgICAp
OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgfQogICAg
ICAgIAogICAgVXBsb2FkSGFuZGxlciA9IGZ1bmN0aW9uIChjb250YWluZXIsIG9wdGlvbnMpIHsK
ICAgICAgICB2YXIgdXBsb2FkSGFuZGxlciA9IHRoaXM7CgogICAgICAgIHRoaXMubG9jYWxlID0g
e307CiAgICAgICAgdGhpcy5tYXhGaWxlU2l6ZSA9IG51bGw7CiAgICAgICAgdGhpcy5taW5GaWxl
U2l6ZSA9IDE7CiAgICAgICAgdGhpcy5tYXhOdW1iZXJPZkZpbGVzID0gbnVsbDsKICAgICAgICB0
aGlzLmFjY2VwdEZpbGVUeXBlcyA9IC8uKyQvaTsKICAgICAgICB0aGlzLmF1dG9VcGxvYWQgPSBm
YWxzZTsKICAgICAgICB0aGlzLmZvcmNlSWZyYW1lRG93bmxvYWQgPSB0cnVlOwogICAgICAgIHRo
aXMudXJsID0gY29udGFpbmVyLmZpbmQoJ2Zvcm06Zmlyc3QnKS5hdHRyKCdhY3Rpb24nKTsKICAg
ICAgICB0aGlzLmRyb3Bab25lID0gY29udGFpbmVyLmZpbmQoJ2Zvcm06Zmlyc3QnKTsKICAgICAg
ICB0aGlzLnVwbG9hZFRhYmxlID0gY29udGFpbmVyLmZpbmQoJy5maWxlczpmaXJzdCcpOwogICAg
ICAgIHRoaXMuZG93bmxvYWRUYWJsZSA9IHRoaXMudXBsb2FkVGFibGU7CiAgICAgICAgdGhpcy5w
cm9ncmVzc0FsbE5vZGUgPSBjb250YWluZXIuZmluZCgnLmZpbGVfdXBsb2FkX292ZXJhbGxfcHJv
Z3Jlc3MgZGl2OmZpcnN0Jyk7CiAgICAgICAgdGhpcy51cGxvYWRUZW1wbGF0ZSA9IHRoaXMudXBs
b2FkVGFibGUuZmluZCgnLmZpbGVfdXBsb2FkX3RlbXBsYXRlOmZpcnN0Jyk7CiAgICAgICAgdGhp
cy5kb3dubG9hZFRlbXBsYXRlID0gdGhpcy51cGxvYWRUYWJsZS5maW5kKCcuZmlsZV9kb3dubG9h
ZF90ZW1wbGF0ZTpmaXJzdCcpOwogICAgICAgIHRoaXMubXVsdGlCdXR0b25zID0gY29udGFpbmVy
LmZpbmQoJy5maWxlX3VwbG9hZF9idXR0b25zOmZpcnN0Jyk7CiAgICAgICAgCiAgICAgICAgdGhp
cy5hZGp1c3RNYXhOdW1iZXJPZkZpbGVzID0gZnVuY3Rpb24gKG9wZXJhbmQpIHsKICAgICAgICAg
ICAgdmFyIG51bWJlciA9IGNvbnRhaW5lci5maWxlVXBsb2FkVUlYKCdvcHRpb24nLCAnbWF4TnVt
YmVyT2ZGaWxlcycpOwogICAgICAgICAgICBpZiAodHlwZW9mIG51bWJlciA9PT0gJ251bWJlcicp
IHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5maWxlVXBsb2FkVUlYKCdvcHRpb24nLCAnbWF4
TnVtYmVyT2ZGaWxlcycsIG51bWJlciArIG9wZXJhbmQpOwogICAgICAgICAgICB9CiAgICAgICAg
fTsKICAgICAgICAKICAgICAgICB0aGlzLmZvcm1hdEZpbGVTaXplID0gZnVuY3Rpb24gKGJ5dGVz
KSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgIT09ICdudW1iZXInIHx8IGJ5dGVzID09
PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgICAgIH0KICAgICAg
ICAgICAgaWYgKGJ5dGVzID49IDEwMDAwMDAwMDApIHsKICAgICAgICAgICAgICAgIHJldHVybiAo
Ynl0ZXMgLyAxMDAwMDAwMDAwKS50b0ZpeGVkKDIpICsgJyBHQic7CiAgICAgICAgICAgIH0KICAg
ICAgICAgICAgaWYgKGJ5dGVzID49IDEwMDAwMDApIHsKICAgICAgICAgICAgICAgIHJldHVybiAo
Ynl0ZXMgLyAxMDAwMDAwKS50b0ZpeGVkKDIpICsgJyBNQic7CiAgICAgICAgICAgIH0KICAgICAg
ICAgICAgcmV0dXJuIChieXRlcyAvIDEwMDApLnRvRml4ZWQoMikgKyAnIEtCJzsKICAgICAgICB9
OwogICAgICAgIAogICAgICAgIHRoaXMuZm9ybWF0RmlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkg
ewogICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJyc7
CiAgICAgICAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL14uKltcL1xcXS8sICcnKTsKICAgICAg
ICB9OwogICAgICAgIAogICAgICAgIHRoaXMuZW5hYmxlRHJhZ1RvRGVza3RvcCA9IGZ1bmN0aW9u
ICgpIHsKICAgICAgICAgICAgdmFyIGxpbmsgPSAkKHRoaXMpLAogICAgICAgICAgICAgICAgdXJs
ID0gbGluay5nZXQoMCkuaHJlZiwKICAgICAgICAgICAgICAgIG5hbWUgPSBkZWNvZGVVUklDb21w
b25lbnQodXJsLnNwbGl0KCcvJykucG9wKCkpLnJlcGxhY2UoLzovZywgJy0nKSwKICAgICAgICAg
ICAgICAgIHR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJzsKICAgICAgICAgICAgbGlu
ay5iaW5kKCdkcmFnc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgIHRy
eSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIK
ICAgICAgICAgICAgICAgICAgICAgICAgLnNldERhdGEoJ0Rvd25sb2FkVVJMJywgW3R5cGUsIG5h
bWUsIHVybF0uam9pbignOicpKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAg
ICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHRoaXMuYnVpbGRNdWx0aVVwbG9hZFJvdyA9
IGZ1bmN0aW9uIChmaWxlcywgaGFuZGxlcikgewogICAgICAgICAgICB2YXIgcm93cyA9ICQoJzx0
Ym9keSBzdHlsZT0iZGlzcGxheTpub25lOyIvPicpOwogICAgICAgICAgICAkLmVhY2goZmlsZXMs
IGZ1bmN0aW9uIChpbmRleCwgZmlsZSkgewogICAgICAgICAgICAgICAgdmFyIHJvdyA9IGhhbmRs
ZXIuYnVpbGRVcGxvYWRSb3coZmlsZXMsIGluZGV4LCBoYW5kbGVyKS5zaG93KCksCiAgICAgICAg
ICAgICAgICAgICAgY2VsbHMgPSByb3cuZmluZCgKICAgICAgICAgICAgICAgICAgICAgICAgJy5m
aWxlX3VwbG9hZF9wcm9ncmVzcywgLmZpbGVfdXBsb2FkX3N0YXJ0LCAuZmlsZV91cGxvYWRfY2Fu
Y2VsJwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHsK
ICAgICAgICAgICAgICAgICAgICBjZWxscy5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0gZWxz
ZSB7CiAgICAgICAgICAgICAgICAgICAgY2VsbHMuYXR0cigncm93c3BhbicsIGZpbGVzLmxlbmd0
aCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByb3dzLmFwcGVuZChyb3cpOwog
ICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJvd3M7CiAgICAgICAgfTsKCiAgICAg
ICAgdGhpcy5idWlsZFVwbG9hZFJvdyA9IGZ1bmN0aW9uIChmaWxlcywgaW5kZXgsIGhhbmRsZXIp
IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleCAhPT0gJ251bWJlcicpIHsKICAgICAgICAg
ICAgICAgIHJldHVybiBoYW5kbGVyLmJ1aWxkTXVsdGlVcGxvYWRSb3coZmlsZXMsIGhhbmRsZXIp
OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbaW5kZXhdLAogICAg
ICAgICAgICAgICAgZmlsZU5hbWUgPSBoYW5kbGVyLmZvcm1hdEZpbGVOYW1lKGZpbGUubmFtZSks
CiAgICAgICAgICAgICAgICB1cGxvYWRSb3cgPSBoYW5kbGVyLnVwbG9hZFRlbXBsYXRlCiAgICAg
ICAgICAgICAgICAgICAgLmNsb25lKCkucmVtb3ZlQXR0cignaWQnKTsKICAgICAgICAgICAgdXBs
b2FkUm93LmZpbmQoJy5maWxlX25hbWUnKQogICAgICAgICAgICAgICAgLnRleHQoZmlsZU5hbWUp
OwogICAgICAgICAgICB1cGxvYWRSb3cuZmluZCgnLmZpbGVfc2l6ZScpCiAgICAgICAgICAgICAg
ICAudGV4dChoYW5kbGVyLmZvcm1hdEZpbGVTaXplKGZpbGUuc2l6ZSkpOwogICAgICAgICAgICBp
ZiAoaGFuZGxlci5hdXRvVXBsb2FkKSB7CiAgICAgICAgICAgICAgICB1cGxvYWRSb3cuZmluZCgn
LmZpbGVfdXBsb2FkX3N0YXJ0IGJ1dHRvbicpLmhpZGUoKTsKICAgICAgICAgICAgfSBlbHNlIHsK
ICAgICAgICAgICAgICAgIHVwbG9hZFJvdy5maW5kKCcuZmlsZV91cGxvYWRfc3RhcnQgYnV0dG9u
JykKICAgICAgICAgICAgICAgICAgICAuYnV0dG9uKHtpY29uczoge3ByaW1hcnk6ICd1aS1pY29u
LWNpcmNsZS1hcnJvdy1lJ30sIHRleHQ6IGZhbHNlfSk7CiAgICAgICAgICAgIH0KICAgICAgICAg
ICAgdXBsb2FkUm93LmZpbmQoJy5maWxlX3VwbG9hZF9jYW5jZWwgYnV0dG9uJykKICAgICAgICAg
ICAgICAgIC5idXR0b24oe2ljb25zOiB7cHJpbWFyeTogJ3VpLWljb24tY2FuY2VsJ30sIHRleHQ6
IGZhbHNlfSk7CiAgICAgICAgICAgIHJldHVybiB1cGxvYWRSb3c7CiAgICAgICAgfTsKCiAgICAg
ICAgdGhpcy5nZXRGaWxlVXJsID0gZnVuY3Rpb24gKGZpbGUsIGhhbmRsZXIpIHsKICAgICAgICAg
ICAgcmV0dXJuIGZpbGUudXJsOwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5nZXRU
aHVtYm5haWxVcmwgPSBmdW5jdGlvbiAoZmlsZSwgaGFuZGxlcikgewogICAgICAgICAgICByZXR1
cm4gZmlsZS50aHVtYm5haWw7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5idWlsZE11bHRpRG93
bmxvYWRSb3cgPSBmdW5jdGlvbiAoZmlsZXMsIGhhbmRsZXIpIHsKICAgICAgICAgICAgdmFyIHJv
d3MgPSAkKCc8dGJvZHkgc3R5bGU9ImRpc3BsYXk6bm9uZTsiLz4nKTsKICAgICAgICAgICAgJC5l
YWNoKGZpbGVzLCBmdW5jdGlvbiAoaW5kZXgsIGZpbGUpIHsKICAgICAgICAgICAgICAgIHJvd3Mu
YXBwZW5kKGhhbmRsZXIuYnVpbGREb3dubG9hZFJvdyhmaWxlLCBoYW5kbGVyKS5zaG93KCkpOwog
ICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJvd3M7CiAgICAgICAgfTsKCiAgICAg
ICAgdGhpcy5idWlsZERvd25sb2FkUm93ID0gZnVuY3Rpb24gKGZpbGUsIGhhbmRsZXIpIHsKICAg
ICAgICAgICAgaWYgKCQuaXNBcnJheShmaWxlKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGhh
bmRsZXIuYnVpbGRNdWx0aURvd25sb2FkUm93KGZpbGUsIGhhbmRsZXIpOwogICAgICAgICAgICB9
CiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9IGhhbmRsZXIuZm9ybWF0RmlsZU5hbWUoZmlsZS5u
YW1lKSwKICAgICAgICAgICAgICAgIGZpbGVVcmwgPSBoYW5kbGVyLmdldEZpbGVVcmwoZmlsZSwg
aGFuZGxlciksCiAgICAgICAgICAgICAgICB0aHVtYm5haWxVcmwgPSBoYW5kbGVyLmdldFRodW1i
bmFpbFVybChmaWxlLCBoYW5kbGVyKSwKICAgICAgICAgICAgICAgIGRvd25sb2FkUm93ID0gaGFu
ZGxlci5kb3dubG9hZFRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgLmNsb25lKCkucmVtb3Zl
QXR0cignaWQnKTsKICAgICAgICAgICAgZG93bmxvYWRSb3cuYXR0cignZGF0YS1pZCcsIGZpbGUu
aWQgfHwgZmlsZS5uYW1lKTsKICAgICAgICAgICAgZG93bmxvYWRSb3cuZmluZCgnLmZpbGVfbmFt
ZSBhJykKICAgICAgICAgICAgICAgIC50ZXh0KGZpbGVOYW1lKTsKICAgICAgICAgICAgZG93bmxv
YWRSb3cuZmluZCgnLmZpbGVfc2l6ZScpCiAgICAgICAgICAgICAgICAudGV4dChoYW5kbGVyLmZv
cm1hdEZpbGVTaXplKGZpbGUuc2l6ZSkpOwogICAgICAgICAgICBpZiAodGh1bWJuYWlsVXJsKSB7
CiAgICAgICAgICAgICAgICBkb3dubG9hZFJvdy5maW5kKCcuZmlsZV9kb3dubG9hZF9wcmV2aWV3
JykuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICQoJzxhLz4nKS5hcHBlbmQoJCgnPGltZy8+
JykuYXR0cignc3JjJywgdGh1bWJuYWlsVXJsKSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAg
ICAgICAgICBkb3dubG9hZFJvdy5maW5kKCdhJykuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIGRvd25sb2FkUm93LmZpbmQoJ2EnKQogICAgICAgICAg
ICAgICAgLmF0dHIoJ2hyZWYnLCBmaWxlVXJsIHx8IG51bGwpCiAgICAgICAgICAgICAgICAuZWFj
aChoYW5kbGVyLmVuYWJsZURyYWdUb0Rlc2t0b3ApOwogICAgICAgICAgICBkb3dubG9hZFJvdy5m
aW5kKCcuZmlsZV9kb3dubG9hZF9kZWxldGUgYnV0dG9uJykKICAgICAgICAgICAgICAgIC5idXR0
b24oe2ljb25zOiB7cHJpbWFyeTogJ3VpLWljb24tdHJhc2gnfSwgdGV4dDogZmFsc2V9KTsKICAg
ICAgICAgICAgcmV0dXJuIGRvd25sb2FkUm93OwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAg
dGhpcy5vbkVycm9yID0gZnVuY3Rpb24gKGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxl
cikgewogICAgICAgICAgICBoYW5kbGVyLnVwbG9hZFJvdy5hZGRDbGFzcygnZmlsZV91cGxvYWRf
ZXJyb3InKQogICAgICAgICAgICAgICAgLmZpbmQoJy5maWxlX3VwbG9hZF9wcm9ncmVzcycpLmFw
cGVuZCgkKCc8ZGl2IGNsYXNzPSJlcnJvciIvPicpLmFwcGVuZCgKICAgICAgICAgICAgICAgICAg
ICBoYW5kbGVyLmxvY2FsZVtldmVudF0gfHwgZXZlbnQKICAgICAgICAgICAgICAgICkpOwogICAg
ICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IGZ1bmN0aW9uIChldmVudCwg
ZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIpIHsKICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSB0
cnVlLAogICAgICAgICAgICAgICAgZmlsZTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleCAh
PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgICQuZWFjaChmaWxlcywgZnVuY3Rpb24gKGlu
ZGV4LCBmaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgaXNWYWxpZCA9IGhhbmRsZXIudmFsaWRh
dGUoZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAgICAgICAgICAgIH0p
OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZmlsZSA9IGZpbGVzW2luZGV4
XTsKICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLm1heEZpbGVTaXplICYmIGZpbGUuc2l6ZSA+
IGhhbmRsZXIubWF4RmlsZVNpemUpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLm9uRXJy
b3IoJ0ZpbGUgaXMgdG9vIGJpZycsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAg
ICAgICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYg
KHR5cGVvZiBmaWxlLnNpemUgPT09ICdudW1iZXInICYmIGZpbGUuc2l6ZSA8IGhhbmRsZXIubWlu
RmlsZVNpemUpIHsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLm9uRXJyb3IoJ0ZpbGUgaXMg
dG9vIHNtYWxsJywgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIpOwogICAgICAgICAgICAgICAg
ICAgIGlzVmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm
ICghKGhhbmRsZXIuYWNjZXB0RmlsZVR5cGVzLnRlc3QoZmlsZS50eXBlKSB8fAogICAgICAgICAg
ICAgICAgICAgICAgICBoYW5kbGVyLmFjY2VwdEZpbGVUeXBlcy50ZXN0KGZpbGUubmFtZSkpKSB7
CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5vbkVycm9yKCdGaWxldHlwZSBub3QgYWxsb3dl
ZCcsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICBpc1Zh
bGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9m
IGhhbmRsZXIubWF4TnVtYmVyT2ZGaWxlcyA9PT0gJ251bWJlcicgJiYKICAgICAgICAgICAgICAg
ICAgICAgICAgaGFuZGxlci5tYXhOdW1iZXJPZkZpbGVzIDwgaW5kZXggKyAxKSB7CiAgICAgICAg
ICAgICAgICAgICAgaGFuZGxlci5vbkVycm9yKCdNYXggbnVtYmVyIGV4Y2VlZGVkJywgZmlsZXMs
IGluZGV4LCB4aHIsIGhhbmRsZXIpOwogICAgICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxz
ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaXNW
YWxpZDsKICAgICAgICB9OwoKICAgICAgICB0aGlzLnVwbG9hZENhbGxCYWNrID0gZnVuY3Rpb24g
KGV2ZW50LCBmaWxlcywgaW5kZXgsIHhociwgaGFuZGxlciwgY2FsbEJhY2spIHsKICAgICAgICAg
ICAgY2FsbEJhY2soKTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMuYmVmb3JlU2Vu
ZCA9IGZ1bmN0aW9uIChldmVudCwgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIsIGNhbGxCYWNr
KSB7CiAgICAgICAgICAgIGlmICghaGFuZGxlci52YWxpZGF0ZShldmVudCwgZmlsZXMsIGluZGV4
LCB4aHIsIGhhbmRsZXIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0K
ICAgICAgICAgICAgdmFyIG51bWJlciA9IHR5cGVvZiBpbmRleCA9PT0gJ251bWJlcicgPyAxIDog
ZmlsZXMubGVuZ3RoOwogICAgICAgICAgICBoYW5kbGVyLmFkanVzdE1heE51bWJlck9mRmlsZXMo
LW51bWJlcik7CiAgICAgICAgICAgIGhhbmRsZXIudXBsb2FkUm93LmZpbmQoaGFuZGxlci5jYW5j
ZWxTZWxlY3RvcikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGhhbmRsZXIu
YWRqdXN0TWF4TnVtYmVyT2ZGaWxlcyhudW1iZXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAg
ICAgaWYgKGhhbmRsZXIuYXV0b1VwbG9hZCkgewogICAgICAgICAgICAgICAgaGFuZGxlci51cGxv
YWRDYWxsQmFjayhldmVudCwgZmlsZXMsIGluZGV4LCB4aHIsIGhhbmRsZXIsIGNhbGxCYWNrKTsK
ICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhhbmRsZXIudXBsb2FkUm93LmZp
bmQoJy5maWxlX3VwbG9hZF9zdGFydCBidXR0b24nKS5jbGljayhmdW5jdGlvbiAoZSkgewogICAg
ICAgICAgICAgICAgICAgICQodGhpcykuZmFkZU91dCgpOwogICAgICAgICAgICAgICAgICAgIGhh
bmRsZXIudXBsb2FkQ2FsbEJhY2soZXZlbnQsIGZpbGVzLCBpbmRleCwgeGhyLCBoYW5kbGVyLCBj
YWxsQmFjayk7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAg
ICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB0aGlzLmRvd25s
b2FkSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICh1cGxvYWRIYW5kbGVy
LmZvcmNlSWZyYW1lRG93bmxvYWQpIHsKICAgICAgICAgICAgICAgIC8vIE9wZW4gZG93bmxvYWQg
ZGlhbG9ncyB2aWEgaWZyYW1lcywgdG8gcHJldmVudCBhYm9ydGluZyBjdXJyZW50IHVwbG9hZHM6
CiAgICAgICAgICAgICAgICAkKCc8aWZyYW1lIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ii8+JykKICAg
ICAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgdGhpcy5ocmVmKQogICAgICAgICAgICAgICAg
ICAgIC5hcHBlbmRUbyhjb250YWluZXIpOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVs
dCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5kZWxldGVIYW5kbGVy
ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHJvdyA9ICQodGhpcykuY2xvc2VzdCgn
dHInKTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDogdXBsb2FkSGFu
ZGxlci51cmwgKyAnP2ZpbGU9JyArIGVuY29kZVVSSUNvbXBvbmVudCgKICAgICAgICAgICAgICAg
ICAgICByb3cuYXR0cignZGF0YS1pZCcpCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAg
ICAgdHlwZTogJ0RFTEVURScsCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7
CiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5hZGp1c3RNYXhOdW1iZXJPZkZpbGVz
KDEpOwogICAgICAgICAgICAgICAgICAgIHJvdy5mYWRlT3V0KGZ1bmN0aW9uICgpIHsKICAgICAg
ICAgICAgICAgICAgICAgICAgcm93LnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwog
ICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVm
YXVsdCgpOwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5pbml0RXZlbnRIYW5kbGVy
cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kb3dubG9hZFRhYmxl
LmZpbmQoJ2E6bm90KFt0YXJnZXQ9Il9ibGFuayJdKScpCiAgICAgICAgICAgICAgICAubGl2ZSgn
Y2xpY2snLCB1cGxvYWRIYW5kbGVyLmRvd25sb2FkSGFuZGxlcik7CiAgICAgICAgICAgIHVwbG9h
ZEhhbmRsZXIuZG93bmxvYWRUYWJsZS5maW5kKCcuZmlsZV9kb3dubG9hZF9kZWxldGUgYnV0dG9u
JykKICAgICAgICAgICAgICAgIC5saXZlKCdjbGljaycsIHVwbG9hZEhhbmRsZXIuZGVsZXRlSGFu
ZGxlcik7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5kZXN0cm95RXZlbnRIYW5kbGVycyA9IGZ1
bmN0aW9uICgpIHsKICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5kb3dubG9hZFRhYmxlLmZpbmQo
J2E6bm90KFt0YXJnZXQ9Il9ibGFuayJdKScpCiAgICAgICAgICAgICAgICAuZGllKCdjbGljaycs
IHVwbG9hZEhhbmRsZXIuZG93bmxvYWRIYW5kbGVyKTsKICAgICAgICAgICAgdXBsb2FkSGFuZGxl
ci5kb3dubG9hZFRhYmxlLmZpbmQoJy5maWxlX2Rvd25sb2FkX2RlbGV0ZSBidXR0b24nKQogICAg
ICAgICAgICAgICAgLmRpZSgnY2xpY2snLCB1cGxvYWRIYW5kbGVyLmRlbGV0ZUhhbmRsZXIpOwog
ICAgICAgIH07CiAgICAgICAgCiAgICAgICAgdGhpcy5tdWx0aUJ1dHRvbkhhbmRsZXIgPSBmdW5j
dGlvbiAoZSkgewogICAgICAgICAgICB1cGxvYWRIYW5kbGVyLnVwbG9hZFRhYmxlLmZpbmQoZS5k
YXRhLnNlbGVjdG9yICsgJyBidXR0b246dmlzaWJsZScpLmNsaWNrKCk7CiAgICAgICAgICAgIGUu
cHJldmVudERlZmF1bHQoKTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIHRoaXMuaW5pdE11
bHRpQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHVwbG9hZEhhbmRsZXIu
YXV0b1VwbG9hZCkgewogICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5tdWx0aUJ1dHRvbnMu
ZmluZCgnLmZpbGVfdXBsb2FkX3N0YXJ0OmZpcnN0JykuaGlkZSgpOwogICAgICAgICAgICB9IGVs
c2UgewogICAgICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5tdWx0aUJ1dHRvbnMuZmluZCgnLmZp
bGVfdXBsb2FkX3N0YXJ0OmZpcnN0JykKICAgICAgICAgICAgICAgICAgICAuYnV0dG9uKHtpY29u
czoge3ByaW1hcnk6ICd1aS1pY29uLWNpcmNsZS1hcnJvdy1lJ319KQogICAgICAgICAgICAgICAg
ICAgIC5iaW5kKCdjbGljaycsIHtzZWxlY3RvcjogJy5maWxlX3VwbG9hZF9zdGFydCd9LCB1cGxv
YWRIYW5kbGVyLm11bHRpQnV0dG9uSGFuZGxlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg
dXBsb2FkSGFuZGxlci5tdWx0aUJ1dHRvbnMuZmluZCgnLmZpbGVfdXBsb2FkX2NhbmNlbDpmaXJz
dCcpCiAgICAgICAgICAgICAgICAuYnV0dG9uKHtpY29uczoge3ByaW1hcnk6ICd1aS1pY29uLWNh
bmNlbCd9fSkKICAgICAgICAgICAgICAgIC5iaW5kKCdjbGljaycsIHtzZWxlY3RvcjogJy5maWxl
X3VwbG9hZF9jYW5jZWwnfSwgdXBsb2FkSGFuZGxlci5tdWx0aUJ1dHRvbkhhbmRsZXIpOwogICAg
ICAgICAgICB1cGxvYWRIYW5kbGVyLm11bHRpQnV0dG9ucy5maW5kKCcuZmlsZV9kb3dubG9hZF9k
ZWxldGU6Zmlyc3QnKQogICAgICAgICAgICAgICAgLmJ1dHRvbih7aWNvbnM6IHtwcmltYXJ5OiAn
dWktaWNvbi10cmFzaCd9fSkKICAgICAgICAgICAgICAgIC5iaW5kKCdjbGljaycsIHtzZWxlY3Rv
cjogJy5maWxlX2Rvd25sb2FkX2RlbGV0ZSd9LCB1cGxvYWRIYW5kbGVyLm11bHRpQnV0dG9uSGFu
ZGxlcik7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLmRlc3Ryb3lNdWx0aUJ1dHRv
bnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIubXVsdGlCdXR0b25z
LmZpbmQoCiAgICAgICAgICAgICAgICAnLmZpbGVfdXBsb2FkX3N0YXJ0OmZpcnN0LCAuZmlsZV91
cGxvYWRfY2FuY2VsOmZpcnN0LCAuZmlsZV9kb3dubG9hZF9kZWxldGU6Zmlyc3QnCiAgICAgICAg
ICAgICkudW5iaW5kKCdjbGljaycsIHVwbG9hZEhhbmRsZXIubXVsdGlCdXR0b25IYW5kbGVyKS5i
dXR0b24oJ2Rlc3Ryb3knKS5zaG93KCk7CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5pbml0RXh0
ZW5kZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIuaW5pdEV2ZW50
SGFuZGxlcnMoKTsKICAgICAgICAgICAgdXBsb2FkSGFuZGxlci5pbml0TXVsdGlCdXR0b25zKCk7
CiAgICAgICAgfTsKCiAgICAgICAgdGhpcy5kZXN0cm95RXh0ZW5kZWQgPSBmdW5jdGlvbiAoKSB7
CiAgICAgICAgICAgIHVwbG9hZEhhbmRsZXIuZGVzdHJveUV2ZW50SGFuZGxlcnMoKTsKICAgICAg
ICAgICAgdXBsb2FkSGFuZGxlci5kZXN0cm95TXVsdGlCdXR0b25zKCk7CiAgICAgICAgfTsKCiAg
ICAgICAgJC5leHRlbmQodGhpcywgb3B0aW9ucyk7CiAgICB9OwoKICAgIG1ldGhvZHMgPSB7CiAg
ICAgICAgaW5pdCA6IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlz
LmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJCh0aGlzKS5maWxlVXBsb2FkVUko
bmV3IFVwbG9hZEhhbmRsZXIoJCh0aGlzKSwgb3B0aW9ucykpOwogICAgICAgICAgICB9KTsKICAg
ICAgICB9LAogICAgICAgIAogICAgICAgIG9wdGlvbjogZnVuY3Rpb24gKG9wdGlvbiwgdmFsdWUs
IG5hbWVzcGFjZSkgewogICAgICAgICAgICBpZiAoIW9wdGlvbiB8fCAodHlwZW9mIG9wdGlvbiA9
PT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykpIHsKICAgICAgICAg
ICAgICAgIHJldHVybiAkKHRoaXMpLmZpbGVVcGxvYWQoJ29wdGlvbicsIG9wdGlvbiwgdmFsdWUs
IG5hbWVzcGFjZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChm
dW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbGVVcGxvYWRVSSgnb3B0aW9u
Jywgb3B0aW9uLCB2YWx1ZSwgbmFtZXNwYWNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwK
ICAgICAgICAgICAgCiAgICAgICAgZGVzdHJveSA6IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHsKICAg
ICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAk
KHRoaXMpLmZpbGVVcGxvYWRVSSgnZGVzdHJveScsIG5hbWVzcGFjZSk7CiAgICAgICAgICAgIH0p
OwogICAgICAgIH0sCiAgICAgICAgCiAgICAgICAgdXBsb2FkOiBmdW5jdGlvbiAoZmlsZXMsIG5h
bWVzcGFjZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAg
ICAgICAgICAgICAgICQodGhpcykuZmlsZVVwbG9hZFVJKCd1cGxvYWQnLCBmaWxlcywgbmFtZXNw
YWNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKICAgIAogICAgJC5mbi5maWxl
VXBsb2FkVUlYID0gZnVuY3Rpb24gKG1ldGhvZCkgewogICAgICAgIGlmIChtZXRob2RzW21ldGhv
ZF0pIHsKICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBBcnJh
eS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgICAgICB9IGVsc2UgaWYg
KHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHsKICAgICAgICAgICAgcmV0
dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0gZWxzZSB7
CiAgICAgICAgICAgICQuZXJyb3IoJ01ldGhvZCAiJyArIG1ldGhvZCArICciIGRvZXMgbm90IGV4
aXN0IG9uIGpRdWVyeS5maWxlVXBsb2FkVUlYJyk7CiAgICAgICAgfQogICAgfTsKICAgIAp9KGpR
dWVyeSkpOwo=]]></Resource>
  </Resources>
  <SourceCode><![CDATA[

import sys

class VDOM_uploader_2(VDOM_object):

	def render(self, parent, contents=""):
		woid = (self.id).replace('-', '_')
		id = u"o_" + woid

		display = u"display: none;" if self.visible == "0" else u""
		style = u"display:block;margin:0;padding:0; z-index:{zind}; position:{pos}; top:{top}px; left:{left}px; height:{height}px; {display}" \
			.format(
				zind = self.zindex, pos = self.position,
				top = self.top, left = self.left,
				height = self.height, display = display
			)

		classname = u"""class="%s" """ % self.classname if self.classname else u""

		pageurl = (self.pageurl).strip()
		if pageurl != "":
			pageurl = u"/%s.vdom" % pageurl

		try:
			formdata = json.loads(self.formdata)
		except:
			formdata = {}

		if isinstance(formdata, list):
			formdata = {}

		if VDOM_CONFIG_1["DEBUG"] == "1":
			debug_info = u"objtype='uploader_2' objname='%s' ver='%s @ 2012-08-21'" % (self.name, self.type.version)
		else:
			debug_info = u""

		js = u"""
<script type='text/javascript'>
$j(function(){
	$j('#%(id)s').fileUploadUI({
		dataType: 'json',
		dropZone: $j('#%(id)s'),
		autoUpload: true,
		replaceFileInput: false,
		/*forceIframeUpload: true,*/
		onCompleteAll: function (e, data) {
			execEventBinded('%(woid)s', "done", {}, true);
		},
		onSend: function (event, files, index, xhr, handler) {
			if (!xhr.upload && handler.progressbar) {
				handler.progressbar.progressbar( 'value', 100 );
			}
			execEventBinded('%(woid)s', "start", {}, true);
		},
		onProgressAll: function (event, list) {
			execEventBinded('%(woid)s', "progress", {
				total: event.total,
				loaded: event.loaded,
				percent: parseInt(event.loaded / event.total * 100, 10)
			}, true);
		},
		onError: function (event, files, index, xhr, handler) {
			execEventBinded('%(woid)s', "error", {text: event.textStatus}, true);
		},
		onAbort: function (event, files, index, xhr, handler) {
			execEventBinded('%(woid)s', "cancel", {}, true);
		},
		uploadTable: $j('#%(id)s table.files'),
		buildUploadRow: function (files, index) {
			return $j('<tr style="display:none"><td class="file_upload_cancel"><button class="ui-state-default" title="Cancel"><span class="ui-icon ui-icon-cancel">Cancel<\/span><\/button><\/td><td class="file_upload_preview"><\/td>' +
									'<td>' + files[index].name + '<\/td>' +
									'<td class="file_upload_start"><button style="display:none" title="Start Upload"><\/button><\/td>' +
								'<\/tr>');
		}/*, // for upload by button
		beforeSend: function (event, files, index, xhr, handler, callBack) {
			handler.uploadRow.find('.file_upload_start button').click(function () {
				callBack();
				return false;
			});
		}*/
	});
});
</script>
		""" % { "woid": woid, "id": id, "formdata": formdata }

		result = \
			u"""
<form id="{id}" action="{pageurl}" method="post" enctype="multipart/form-data" style="{style}" {classname}>
	<input type="file" name="files[]" multiple />
	<table class="files"></table>
</form>
{js}
""" \
			.format(
				id        = id,
				style     = style,
				classname = classname,
				pageurl   = pageurl,
				formdata  = u'{"script": "true"}',
				js        = js
			)

		return VDOM_object.render(self, parent, contents=result)


	def wysiwyg(self, parent, contents=""):
		import utils.wysiwyg
		
		image_id = "d3b7faa2-c2a1-5433-c92e-16f5bde8b918"
		result = utils.wysiwyg.get_empty_wysiwyg_value(self, image_id)
		
		return VDOM_object.wysiwyg(self, parent, contents=result)
]]></SourceCode>
  <Libraries>
    <Library Target="HTML"><![CDATA[<script type='text/javascript' src='/b4993ec8-6d66-8240-22a7-48fbbedfe371.res'></script>]]></Library>
    <Library Target="HTML"><![CDATA[
<style>

form.file_upload {
	position: relative;
	overflow: hidden;
	direction: ltr;
	cursor: pointer;
	text-align: center;
	color: #333;
	font-weight: bold;
	width: 15em;
	height: 2.5em;
	line-height: 2.5em;
	background: transparent;
	border: 1px solid transparent;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	-o-border-radius: 3px;
	border-radius: 3px;
}

form.file_upload_small {
/*
	width: 15em;
	height: 2.5em;
	line-height: 2.5em;
	font-size: 100%;
	background: palegreen;
	border: 1px solid limegreen;
*/
}

form.file_upload_large {
	background: palegreen;
	border: 1px solid limegreen;
}

form.file_upload_highlight,
form.file_upload:hover {
}

form.file_upload input {
	position: absolute;
	top: 0;
	right: 0;
	margin: 0;
	border: 300px solid transparent;
	opacity: 0;
	filter: alpha(opacity=0);
	-ms-filter: 'alpha(opacity=0)';
	-o-transform: translate(-300px, -300px) scale(10);
	-moz-transform: translate(-800px, 0) scale(10);
	cursor: pointer;
	height: 100%;
}

:root form.file_upload input {
  height: auto;
}

form.file_upload button,
.no-js .file_upload_label,
.no-js .file_upload_overall_progress,
.no-js .file_upload_buttons {
	display: none;
}

.file_upload .file_upload_label,
.file_upload .file_upload_overall_progress,
.file_upload .file_upload_buttons {
	display: block;
}

.file_upload img {
	border: none;
}

.progressbar, .progressbar div {
}

.progressbar div {
	width: 100%;
	height: 100%;
	margin: -1px;
}

.file_upload_progress .ui-progressbar-value,
.file_upload_overall_progress .ui-progressbar-value,
.progressbar div {
/*	background: url(pbar-ani.gif);*/
}

.file_upload_progress div {
	width: 150px;
	height: 17px;
}

.file_upload_overall_progress div {
	width: 350px;
	height: 17px;
}

.file_upload .file_name {
}

.file_upload .file_size {
	padding: 0 10px 0 0;
	text-align: right;
	white-space: nowrap;
	font-size: 1.1em;
}

.file_upload .files,
.file_upload_overall_progress {
	margin: 10px 0;
}

.file_upload_error .ui-progressbar,
.file_upload_error .progressbar,
.file_upload_error .file_upload_start button {
	display: none;
}

.file_upload_error .error {
	width: 100%;
	height: 100%;
	color: red;
}

.file_upload .ui-widget {
}

.file_upload table.files td {
	display: none;
}

</style>
]]></Library>
  </Libraries>
  <E2vdom>
    <Events>
      <Userinterfaceevents>
        <Event Name="start" Help="#Lang(507)">
          <Parameters/>
        </Event>
        <Event Name="progress" Help="#Lang(508)">
          <Parameters>
            <Parameter Name="total" Order="" VbType="" Help="#Lang(901)"/>
            <Parameter Name="loaded" Order="" VbType="" Help="#Lang(902)"/>
            <Parameter Name="percent" Order="" VbType="" Help="#Lang(903)"/>
          </Parameters>
        </Event>
        <Event Name="done" Help="#Lang(509)">
          <Parameters/>
        </Event>
        <Event Name="error" Help="#Lang(511)">
          <Parameters>
            <Parameter Name="text" Order="" VbType="" Help="#Lang(904)"/>
          </Parameters>
        </Event>
        <Event Name="cancel" Help="#Lang(512)">
          <Parameters/>
        </Event>
      </Userinterfaceevents>
    </Events>
    <Actions>
      <Container ID="2330fe83-8cd6-4ed5-907d-11874e7ebcf4">
        <Action Help="#Lang(501)" InterfaceName="#Lang(601)" MethodName="hide">
          <Parameters>
            <Parameter DefaultValue="0" Interface="Number(0,9999)" InterfaceName="#Lang(701)" ScriptName="fade" Help="#Lang(801)" RegularExpressionValidation="^[0-9]{1,99}$"/>
          </Parameters>
          <SourceCode><![CDATA[
vdom_ui_hide(this.domCont, fade);
                    ]]></SourceCode>
        </Action>
        <Action Help="#Lang(502)" InterfaceName="#Lang(602)" MethodName="moveTo">
          <Parameters>
            <Parameter DefaultValue="0" Interface="Number(0,9999)" InterfaceName="#Lang(702)" ScriptName="newX" Help="#Lang(802)" RegularExpressionValidation="^[0-9]{1,99}$"/>
            <Parameter DefaultValue="0" Interface="Number(0,9999)" InterfaceName="#Lang(703)" ScriptName="newY" Help="#Lang(803)" RegularExpressionValidation="^[0-9]{1,99}$"/>
            <Parameter DefaultValue="0" Interface="Number(0,9999)" InterfaceName="#Lang(704)" ScriptName="Effect" Help="#Lang(804)" RegularExpressionValidation="^[0-9]{1,99}$"/>
          </Parameters>
          <SourceCode><![CDATA[
vdom_ui_moveTo(this.domCont, newX, newY, Effect);
                    ]]></SourceCode>
        </Action>
        <Action Help="#Lang(503)" InterfaceName="#Lang(603)" MethodName="setStyle">
          <Parameters>
            <Parameter DefaultValue="" Interface="TextField(0,999)" InterfaceName="#Lang(705)" ScriptName="cssStyleValue" Help="#Lang(805)" RegularExpressionValidation="^.{0,999}$"/>
          </Parameters>
          <SourceCode><![CDATA[
jQuery(this).attr('style', cssStyleValue);
                    ]]></SourceCode>
        </Action>
        <Action Help="#Lang(504)" InterfaceName="#Lang(604)" MethodName="show">
          <Parameters>
            <Parameter DefaultValue="0" Interface="Number(0,9999)" InterfaceName="#Lang(706)" ScriptName="fade" Help="#Lang(806)" RegularExpressionValidation="^[0-9]{1,99}$"/>
          </Parameters>
          <SourceCode><![CDATA[
vdom_ui_show(this.domCont, fade);
                    ]]></SourceCode>
        </Action>
        <Action Help="#Lang(505)" InterfaceName="#Lang(605)" MethodName="submit">
          <Parameters/>
          <SourceCode><![CDATA[
$j('#'+this.domCont.id+' .file_upload_start button').click();
return false;
]]></SourceCode>
        </Action>
        <Action Help="#Lang(506)" InterfaceName="#Lang(606)" MethodName="cancel">
          <Parameters/>
          <SourceCode><![CDATA[
var id = this.domCont.id;
$j('#'+this.domCont.id+' .file_upload_cancel button').click();
execEventBinded(id.substring(2, id.length), "cancel", {});
return false;
]]></SourceCode>
        </Action>
      </Container>
    </Actions>
  </E2vdom>
</Type>